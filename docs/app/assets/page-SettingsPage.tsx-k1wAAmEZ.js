import{r as i,j as e}from"./react-vendor-jNdKP8wU.js";import{e as U,a as V}from"./page-CollectionDetail.tsx-DYxPNzRb.js";import{A as f}from"./page-AddGamePage.tsx-CGFUTWrs.js";import{C as k,O as K,n as j}from"./page-HomePage.tsx-CUO-EHtF.js";/* empty css                              */import{u as q}from"./i18n-vendor-mPXi0JFR.js";function ee(){const{t,i18n:m}=q(),{setLoading:S,isLoading:J}=U(),[a,b]=i.useState("en"),[L,p]=i.useState(null),[C,I]=i.useState(!1),[l,v]=i.useState([...k]),[w,x]=i.useState(null),[o,y]=i.useState(""),[g,T]=i.useState(""),[_,A]=i.useState(null),[O,E]=i.useState(null),[R,F]=i.useState(!1),$=w!==null&&(l.length!==w.length||l.some((s,c)=>s!==w[c])),Y=L!==null&&a!==L||$,P=_!==null&&o!==_||O!==null&&g!==O;i.useEffect(()=>{const s=localStorage.getItem("twitch_client_id")||"",c=localStorage.getItem("twitch_client_secret")||"";y(s),T(c),A(s),E(c);const r=()=>{const d=localStorage.getItem("visibleLibraries");if(!d)return null;try{return JSON.parse(d)}catch{return null}};async function H(){S(!0);try{const d=new URL("/settings",f),h=await fetch(d.toString(),{headers:V({Accept:"application/json"})});if(h.ok){const n=await h.json(),u=n.language||"en";b(u),p(u),m.changeLanguage(u);const N=j(n.visibleLibraries);v(N),x(N),localStorage.setItem("visibleLibraries",JSON.stringify(N))}else{const n=localStorage.getItem("language")||"en";b(n),p(n),m.changeLanguage(n);const u=j(r());v(u),x(u)}}catch(d){console.error("Failed to load settings:",d);const h=localStorage.getItem("language")||"en";b(h),p(h),m.changeLanguage(h);const n=j(r());v(n),x(n)}finally{S(!1)}}H()},[S]);async function z(){I(!0);try{const s=new URL("/settings",f);if(!(await fetch(s.toString(),{method:"PUT",headers:V({"Content-Type":"application/json"}),body:JSON.stringify({language:a,visibleLibraries:l})})).ok)throw new Error("Failed to save settings");localStorage.setItem("language",a),localStorage.setItem("visibleLibraries",JSON.stringify(l)),m.changeLanguage(a),p(a),x(l)}catch(s){console.error("Failed to save settings:",s),localStorage.setItem("language",a),localStorage.setItem("visibleLibraries",JSON.stringify(l)),m.changeLanguage(a),p(a),x(l)}finally{I(!1)}}const B=s=>{v(c=>{const r=new Set(c);return r.has(s)?r.delete(s):r.add(s),j(Array.from(r))})};function D(){if(!(!o.trim()||!g.trim())){F(!0);try{localStorage.setItem("twitch_client_id",o.trim()),localStorage.setItem("twitch_client_secret",g.trim()),A(o.trim()),E(g.trim());const s=f.replace(/\/$/,"");window.location.href=s}catch(s){console.error("Failed to save Twitch credentials:",s),F(!1)}}}return e.jsx("div",{className:"bg-[#1a1a1a] text-white settings-page",children:e.jsxs("div",{className:"settings-container",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("h1",{className:"settings-title",children:t("settings.title")}),e.jsx("p",{className:"settings-subtitle",children:t("settings.subtitle")})]}),e.jsxs("div",{className:"bg-[#1a1a1a] settings-card",children:[e.jsx("div",{className:"settings-card-header",children:e.jsx("h2",{className:"settings-card-title",children:t("settings.general")})}),e.jsxs("div",{className:"settings-card-content",children:[e.jsx("div",{className:"settings-field-small",children:e.jsxs("div",{className:"settings-label",children:[t("settings.version")," ","0.1.6"]})}),e.jsxs("div",{className:"settings-field",children:[e.jsxs("div",{className:"settings-field-row",children:[e.jsx("label",{className:"settings-label",htmlFor:"language-select",children:t("settings.language")}),e.jsxs("select",{id:"language-select",name:"language",value:a,onChange:s=>b(s.target.value),className:"settings-select",children:[e.jsx("option",{value:"en",children:t("settings.english")}),e.jsx("option",{value:"it",children:t("settings.italian")}),e.jsx("option",{value:"pt",children:t("settings.portuguese")}),e.jsx("option",{value:"es",children:t("settings.spanish")}),e.jsx("option",{value:"fr",children:t("settings.french")}),e.jsx("option",{value:"de",children:t("settings.german")}),e.jsx("option",{value:"zh",children:t("settings.chinese")}),e.jsx("option",{value:"ja",children:t("settings.japanese")})]})]}),e.jsx("p",{className:"settings-help-text",children:t("settings.selectLanguage")})]}),e.jsxs("div",{className:"settings-field",children:[e.jsx("div",{className:"settings-label",children:t("settings.pages")}),e.jsxs("div",{className:"settings-library-options",children:[k.map(s=>e.jsxs("label",{className:"settings-library-option settings-library-option-disabled",children:[e.jsx("input",{type:"checkbox",checked:!0,disabled:!0,className:"settings-checkbox"}),e.jsx("span",{children:t(`libraries.${s}`)})]},s)),K.map(s=>e.jsxs("label",{className:"settings-library-option",children:[e.jsx("input",{type:"checkbox",checked:l.includes(s),onChange:()=>B(s),className:"settings-checkbox"}),e.jsx("span",{children:t(`libraries.${s}`)})]},s))]}),e.jsx("p",{className:"settings-help-text",children:t("settings.pagesHelp")})]}),e.jsx("div",{className:"settings-actions",children:e.jsx("button",{onClick:z,className:`settings-button ${Y?"settings-button-active":""}`,disabled:J||C||!Y,children:t(C?"settings.saving":"settings.save")})})]})]}),e.jsxs("div",{className:"bg-[#1a1a1a] settings-card",style:{marginTop:"24px"},children:[e.jsx("div",{className:"settings-card-header",children:e.jsx("h2",{className:"settings-card-title",children:t("settings.twitch.title","Twitch OAuth")})}),e.jsxs("div",{className:"settings-card-content",children:[e.jsx("p",{className:"settings-help-text",style:{marginBottom:"24px"},children:t("settings.twitch.description","Configure your Twitch OAuth application credentials. You can get these from the Twitch Developer Console.")}),e.jsxs("div",{className:"settings-field",children:[e.jsx("label",{className:"settings-label",htmlFor:"twitch-client-id",children:t("settings.twitch.clientId","Client ID")}),e.jsx("input",{id:"twitch-client-id",type:"text",value:o,onChange:s=>y(s.target.value),className:"settings-input",placeholder:t("settings.twitch.clientIdPlaceholder","Enter your Twitch Client ID"),style:{marginTop:"8px"}}),e.jsx("p",{className:"settings-help-text",children:t("settings.twitch.clientIdHelp","Your Twitch application Client ID")})]}),e.jsxs("div",{className:"settings-field",children:[e.jsx("label",{className:"settings-label",htmlFor:"twitch-client-secret",children:t("settings.twitch.clientSecret","Client Secret")}),e.jsx("input",{id:"twitch-client-secret",type:"password",value:g,onChange:s=>T(s.target.value),className:"settings-input",placeholder:t("settings.twitch.clientSecretPlaceholder","Enter your Twitch Client Secret"),style:{marginTop:"8px"}}),e.jsx("p",{className:"settings-help-text",children:t("settings.twitch.clientSecretHelp","Your Twitch application Client Secret (keep this secure)")})]}),e.jsx("div",{className:"settings-actions",children:e.jsx("button",{onClick:D,className:`settings-button ${P?"settings-button-active":""}`,disabled:!o.trim()||!g.trim()||R||!P,children:t(R?"settings.saving":"settings.save")})})]})]})]})})}export{ee as S};
