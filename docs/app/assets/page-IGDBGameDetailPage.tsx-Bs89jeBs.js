import{u as L,r as b,j as e,b as T,d as R}from"./react-vendor-jNdKP8wU.js";import{a as E,u as D,k as A,b as F,C as B,T as G}from"./page-CategoriesPage.tsx-PfePlHQa.js";import{B as P,a as z,L as $,f as W,d as H,b as V}from"./page-CategoryPage.tsx-Ct3nuy93.js";import{u as S}from"./i18n-vendor-mPXi0JFR.js";import{A as O,g as U,a as X,c as _,d as K}from"./page-AddGamePage.tsx-SkGFkz5J.js";/* empty css                                    */function Y({game:t}){const{t:l}=S(),a=L(),[d,r]=b.useState(!1),{categories:s}=E();if(!t.genre)return null;const h=Array.isArray(t.genre)?t.genre:[t.genre];if(h.length===0)return null;const p=n=>{const c=s.find(u=>u.title===n);c&&a(`/category/${c.id}`)},m=n=>{n.stopPropagation(),r(!0)},g=h.length>=4&&!d,i=g?h.slice(0,2):h;return e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",alignItems:"center"},children:[i.map((n,c)=>e.jsxs("span",{children:[e.jsx("span",{onClick:()=>p(n),style:{color:"rgba(255, 255, 255, 0.8)",fontFamily:"var(--font-body-2-font-family)",fontSize:"var(--font-body-2-font-size)",lineHeight:"var(--font-body-2-line-height)",cursor:"pointer",textDecoration:"none"},onMouseEnter:u=>{u.currentTarget.style.textDecoration="underline",u.currentTarget.style.color="rgba(255, 255, 255, 1)"},onMouseLeave:u=>{u.currentTarget.style.textDecoration="none",u.currentTarget.style.color="rgba(255, 255, 255, 0.8)"},children:l(`genre.${n}`,n)}),c<i.length-1&&!g&&e.jsxs("span",{style:{color:"rgba(255, 255, 255, 0.8)",fontFamily:"var(--font-body-2-font-family)",fontSize:"var(--font-body-2-font-size)",lineHeight:"var(--font-body-2-line-height)"},children:[","," "]}),c===i.length-1&&g&&e.jsxs("span",{style:{color:"rgba(255, 255, 255, 0.8)",fontFamily:"var(--font-body-2-font-family)",fontSize:"var(--font-body-2-font-size)",lineHeight:"var(--font-body-2-line-height)"},children:[","," "]})]},c)),g&&e.jsx(e.Fragment,{children:e.jsx("span",{onClick:m,style:{color:"rgba(255, 255, 255, 0.8)",fontFamily:"var(--font-body-2-font-family)",fontSize:"var(--font-body-2-font-size)",lineHeight:"var(--font-body-2-line-height)",cursor:"pointer",textDecoration:"none"},onMouseEnter:n=>{n.currentTarget.style.textDecoration="underline",n.currentTarget.style.color="rgba(255, 255, 255, 1)"},onMouseLeave:n=>{n.currentTarget.style.textDecoration="none",n.currentTarget.style.color="rgba(255, 255, 255, 0.8)"},children:l("gameDetail.andMore",", and more")})})]})}const N={"steampowered.com":"Steam","store.steampowered.com":"Steam","epicgames.com":"Epic Games","www.epicgames.com":"Epic Games","gog.com":"GOG","www.gog.com":"GOG","itch.io":"itch.io","xbox.com":"Xbox","playstation.com":"PlayStation","nintendo.com":"Nintendo","twitch.tv":"Twitch","youtube.com":"YouTube","twitter.com":"Twitter","facebook.com":"Facebook","instagram.com":"Instagram","reddit.com":"Reddit","discord.com":"Discord","github.com":"GitHub","wikia.com":"Fandom","fandom.com":"Fandom"};function Z(t){try{let a=new URL(t).hostname;if(N[a])return N[a];const d=a.replace(/^www\./,"");if(N[d])return N[d];const r=d.split(".");if(r.length>=2){const s=r[r.length-2];return s.charAt(0).toUpperCase()+s.slice(1)}return d}catch{const a=t.match(/https?:\/\/(?:www\.)?([^\/]+)/);if(a&&a[1]){const d=a[1];if(N[d])return N[d];const r=d.split(".")[0];return r.charAt(0).toUpperCase()+r.slice(1)}return t.length>30?t.substring(0,27)+"...":t}}function q({url:t}){const l=Z(t);return e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"websites-list-item",title:t,children:l})}function J({websites:t}){return!t||t.length===0?null:e.jsx("div",{className:"websites-list",children:t.map((l,a)=>e.jsxs("span",{children:[e.jsx(q,{url:l.url,category:l.category}),a<t.length-1&&e.jsxs("span",{className:"game-info-list-separator",children:[","," "]})]},a))})}function Q({game:t}){const{t:l}=S();return("id"in t?String(t.id):void 0)!==void 0||t.themes&&t.themes.length>0||t.platforms&&t.platforms.length>0||t.gameModes&&t.gameModes.length>0||t.playerPerspectives&&t.playerPerspectives.length>0||t.websites&&t.websites.length>0||t.developers&&t.developers.length>0||t.publishers&&t.publishers.length>0||t.franchise||t.collection||t.screenshots&&t.screenshots.length>0||t.gameEngines&&t.gameEngines.length>0||t.alternativeNames&&t.alternativeNames.length>0||t.similarGames&&t.similarGames.length>0?e.jsxs("div",{className:"game-info-block",children:[t.themes&&t.themes.length>0&&e.jsxs("div",{className:"game-info-field",children:[e.jsx("div",{className:"text-white game-info-label",children:l("igdbInfo.themes","Themes")}),e.jsx("div",{className:"game-info-list",children:t.themes.map((r,s)=>e.jsxs("span",{children:[e.jsx("span",{className:"game-info-list-item",children:l(`themes.${r}`,r)}),s<t.themes.length-1&&e.jsxs("span",{className:"game-info-list-separator",children:[","," "]})]},s))})]}),t.platforms&&t.platforms.length>0&&e.jsxs("div",{className:"game-info-field",children:[e.jsx("div",{className:"text-white game-info-label",children:l("igdbInfo.platforms","Platforms")}),e.jsx("div",{className:"game-info-list",children:t.platforms.map((r,s)=>e.jsxs("span",{children:[e.jsx("span",{className:"game-info-list-item",children:r}),s<t.platforms.length-1&&e.jsxs("span",{className:"game-info-list-separator",children:[","," "]})]},s))})]}),t.gameModes&&t.gameModes.length>0&&e.jsxs("div",{className:"game-info-field",children:[e.jsx("div",{className:"text-white game-info-label",children:l("igdbInfo.gameModes","Game Modes")}),e.jsx("div",{className:"game-info-list",children:t.gameModes.map((r,s)=>e.jsxs("span",{children:[e.jsx("span",{className:"game-info-list-item",children:r}),s<t.gameModes.length-1&&e.jsxs("span",{className:"game-info-list-separator",children:[","," "]})]},s))})]}),t.playerPerspectives&&t.playerPerspectives.length>0&&e.jsxs("div",{className:"game-info-field",children:[e.jsx("div",{className:"text-white game-info-label",children:l("igdbInfo.playerPerspectives","Player Perspectives")}),e.jsx("div",{className:"game-info-list",children:t.playerPerspectives.map((r,s)=>e.jsxs("span",{children:[e.jsx("span",{className:"game-info-list-item",children:r}),s<t.playerPerspectives.length-1&&e.jsxs("span",{className:"game-info-list-separator",children:[","," "]})]},s))})]}),t.websites&&t.websites.length>0&&e.jsxs("div",{className:"game-info-field",children:[e.jsx("div",{className:"text-white game-info-label",children:l("igdbInfo.websites","Websites")}),e.jsx(J,{websites:t.websites})]}),t.developers&&t.developers.length>0&&e.jsxs("div",{className:"game-info-field",children:[e.jsx("div",{className:"text-white game-info-label",children:l("igdbInfo.developers","Developers")}),e.jsx("div",{className:"game-info-list",children:t.developers.map((r,s)=>e.jsxs("span",{children:[e.jsx("span",{className:"game-info-list-item",children:r}),s<t.developers.length-1&&e.jsxs("span",{className:"game-info-list-separator",children:[","," "]})]},s))})]}),t.publishers&&t.publishers.length>0&&e.jsxs("div",{className:"game-info-field",children:[e.jsx("div",{className:"text-white game-info-label",children:l("igdbInfo.publishers","Publishers")}),e.jsx("div",{className:"game-info-list",children:t.publishers.map((r,s)=>e.jsxs("span",{children:[e.jsx("span",{className:"game-info-list-item",children:r}),s<t.publishers.length-1&&e.jsxs("span",{className:"game-info-list-separator",children:[","," "]})]},s))})]}),t.franchise&&e.jsxs("div",{className:"game-info-field",children:[e.jsx("div",{className:"text-white game-info-label",children:l("igdbInfo.franchise","Franchise")}),e.jsx("div",{className:"game-info-value",children:t.franchise})]}),t.collection&&e.jsxs("div",{className:"game-info-field",children:[e.jsx("div",{className:"text-white game-info-label",children:l("igdbInfo.collection","Collection")}),e.jsx("div",{className:"game-info-value",children:t.collection})]}),t.gameEngines&&t.gameEngines.length>0&&e.jsxs("div",{className:"game-info-field",children:[e.jsx("div",{className:"text-white game-info-label",children:l("igdbInfo.gameEngines","Game Engines")}),e.jsx("div",{className:"game-info-list",children:t.gameEngines.map((r,s)=>e.jsxs("span",{children:[e.jsx("span",{className:"game-info-list-item",children:r}),s<t.gameEngines.length-1&&e.jsxs("span",{className:"game-info-list-separator",children:[","," "]})]},s))})]}),t.alternativeNames&&t.alternativeNames.length>0&&e.jsxs("div",{className:"game-info-field",children:[e.jsx("div",{className:"text-white game-info-label",children:l("igdbInfo.alternativeNames","Alternative Names")}),e.jsx("div",{className:"game-info-list",children:t.alternativeNames.map((r,s)=>e.jsxs("span",{children:[e.jsx("span",{className:"game-info-list-item",children:r}),s<t.alternativeNames.length-1&&e.jsxs("span",{className:"game-info-list-separator",children:[","," "]})]},s))})]}),t.similarGames&&t.similarGames.length>0&&e.jsxs("div",{className:"game-info-field",children:[e.jsx("div",{className:"text-white game-info-label",children:l("igdbInfo.similarGames","Similar Games")}),e.jsx("div",{className:"game-info-list",children:t.similarGames.slice(0,5).map((r,s)=>e.jsxs("span",{children:[e.jsx("span",{className:"game-info-list-item",children:r.name}),s<Math.min(t.similarGames.length,5)-1&&e.jsxs("span",{className:"game-info-list-separator",children:[","," "]})]},s))})]})]}):null}function ee({screenshots:t,videos:l}){const[a,d]=b.useState(null),r=t?.length||0,s=[...(t||[]).map((i,n)=>({type:"screenshot",src:i,index:n})),...(l||[]).map((i,n)=>({type:"video",src:i,index:r+n}))];if(s.length===0)return null;const h=i=>{d(i)},p=()=>{d(null)},m=b.useCallback(i=>{if(a!==null)if(i==="prev"){const n=a>0?a-1:s.length-1;d(n)}else{const n=a<s.length-1?a+1:0;d(n)}},[a,s]);b.useEffect(()=>{if(a===null)return;const i=n=>{n.key==="Escape"?p():n.key==="ArrowLeft"?m("prev"):n.key==="ArrowRight"&&m("next")};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[a,m]);const g=a!==null?s[a]:null;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"12px",overflowX:"auto",overflowY:"hidden",paddingBottom:"8px",scrollbarWidth:"thin",scrollbarColor:"rgba(255, 255, 255, 0.3) transparent"},children:[l&&l.map((i,n)=>e.jsx("div",{onClick:()=>h(r+n),style:{flexShrink:0,width:"300px",borderRadius:"4px",cursor:"pointer",aspectRatio:"16/9",transition:"opacity 0.2s ease, transform 0.2s ease",position:"relative",overflow:"hidden"},onMouseEnter:c=>{c.currentTarget.style.opacity="0.8",c.currentTarget.style.transform="scale(1.02)"},onMouseLeave:c=>{c.currentTarget.style.opacity="1",c.currentTarget.style.transform="scale(1)"},children:e.jsx("iframe",{src:i,title:`Video ${n+1}`,style:{width:"100%",height:"100%",border:"none",borderRadius:"4px"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},`video-${n}`)),t&&t.map((i,n)=>e.jsx("img",{src:i,alt:`Screenshot ${n+1}`,onClick:()=>h(n),style:{flexShrink:0,width:"300px",height:"auto",borderRadius:"4px",cursor:"pointer",objectFit:"cover",aspectRatio:"16/9",transition:"opacity 0.2s ease, transform 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.opacity="0.8",c.currentTarget.style.transform="scale(1.02)"},onMouseLeave:c=>{c.currentTarget.style.opacity="1",c.currentTarget.style.transform="scale(1)"}},`screenshot-${n}`))]}),a!==null&&g&&T.createPortal(e.jsx("div",{onClick:p,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",zIndex:10010,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsxs("div",{onClick:i=>i.stopPropagation(),style:{position:"relative",maxWidth:"90vw",maxHeight:"90vh",display:"flex",alignItems:"center",justifyContent:"center"},children:[s.length>1&&e.jsx("button",{onClick:i=>{i.stopPropagation(),m("prev")},style:{position:"absolute",left:"-60px",backgroundColor:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"50%",width:"48px",height:"48px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"24px",transition:"background-color 0.2s ease"},onMouseEnter:i=>{i.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.3)"},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)"},children:"‹"}),g.type==="screenshot"?e.jsx("img",{src:g.src,alt:`Screenshot ${a+1}`,style:{maxWidth:"100%",maxHeight:"90vh",borderRadius:"4px",objectFit:"contain"}}):e.jsx("iframe",{src:g.src,title:`Video ${a+1}`,style:{width:"90vw",maxWidth:"1600px",aspectRatio:"16/9",borderRadius:"4px",border:"none"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),s.length>1&&e.jsx("button",{onClick:i=>{i.stopPropagation(),m("next")},style:{position:"absolute",right:"-60px",backgroundColor:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"50%",width:"48px",height:"48px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"24px",transition:"background-color 0.2s ease"},onMouseEnter:i=>{i.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.3)"},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)"},children:"›"}),e.jsx("button",{onClick:p,style:{position:"absolute",top:"-60px",right:"0",backgroundColor:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"50%",width:"48px",height:"48px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"24px",transition:"background-color 0.2s ease"},onMouseEnter:i=>{i.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.3)"},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)"},children:"×"}),s.length>1&&e.jsxs("div",{style:{position:"absolute",bottom:"-40px",left:"50%",transform:"translateX(-50%)",color:"white",fontFamily:"var(--font-body-2-font-family)",fontSize:"var(--font-body-2-font-size)",opacity:.8},children:[a+1," / ",s.length]})]})}),document.body)]})}function oe(){const{t,i18n:l}=S(),{igdbId:a}=R(),d=L(),{isLoading:r,setLoading:s}=D(),[h,p]=b.useState(null),m=A({onGameAdded:f=>{f?.id?d(`/game/${f.id}`):d("/")},onError:f=>{alert(t("igdbGameDetail.errorAdding")+": "+f)}}),g=b.useCallback(async f=>{s(!0);try{const j=F(O,`/igdb/game/${f}`),o={Accept:"application/json","X-Auth-Token":U()},x=X(),w=_();x&&(o["X-Twitch-Client-Id"]=x),w&&(o["X-Twitch-Client-Secret"]=w);const k=await fetch(j,{headers:o});if(!k.ok){if(k.status===404){p(null);return}throw new Error(`HTTP ${k.status}`)}const M=await k.json();if(!M){p(null);return}p(M)}catch(j){const o=String(j.message||j);console.error("Error fetching IGDB game:",o),p(null)}finally{s(!1)}},[s]);b.useEffect(()=>{a&&g(parseInt(a,10))},[a,g]);async function i(){h&&await m.addGame(h)}if(r)return null;if(!h)return e.jsx("div",{className:"bg-[#1a1a1a] text-white flex items-center justify-center igdb-game-detail-not-found",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-gray-400",children:t("igdbGameDetail.notFound")})})});const n=256,c=384,u=h.cover||"",v=!!(h?.background&&h.background.trim()!==""),y=h?.background||"",C=(()=>{const f=localStorage.getItem("coverSize");return f?parseInt(f,10):150})(),I=f=>{localStorage.setItem("coverSize",f.toString())};return e.jsx(P,{backgroundUrl:y,hasBackground:v,elementId:`igdb-${h.id}`,children:e.jsx(te,{game:h,coverUrl:u,coverWidth:n,coverHeight:c,coverSize:C,handleCoverSizeChange:I,markingAsOwned:m.isAdding,onMarkAsOwned:i,t,i18n:l})})}function te({game:t,coverUrl:l,coverWidth:a,coverHeight:d,coverSize:r,handleCoverSizeChange:s,markingAsOwned:h,onMarkAsOwned:p,t:m,i18n:g}){const i=o=>K(o,m,g),n=o=>{if(o==null||isNaN(o))return null;const x=Number(o);if(x>=0&&x<=100){const w=x/10;return w%1===0?w.toString():w.toFixed(1)}return null},c=t&&t.genres&&Array.isArray(t.genres)&&t.genres.length>0?t.genres.filter(o=>o&&typeof o=="string"&&o.trim()).map(o=>o.trim()):null,u=c&&c.length>0?{id:`igdb-${t.id}`,title:t.name,summary:t.summary,cover:t.cover||"",background:void 0,day:t.releaseDateFull?.day||null,month:t.releaseDateFull?.month||null,year:t.releaseDateFull?.year||t.releaseDate||null,stars:null,genre:c,criticratings:t.criticRating||null,userratings:t.userRating||null,executables:null}:null,v=n(t.criticRating),y=n(t.userRating),{hasBackground:C,isBackgroundVisible:I}=z(),j=(()=>{let o=1;return i(t)&&o++,u&&o++,(v!==null||y!==null)&&o++,o++,Math.max(2,Math.min(6,7-o))})();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`igdb-game-detail-libraries-bar-wrapper ${C&&I?"game-detail-libraries-bar-transparent":""}`,children:e.jsx($,{libraries:[],activeLibrary:{key:"game",type:"game"},onSelectLibrary:()=>{},loading:!1,error:null,coverSize:r,onCoverSizeChange:s,viewMode:"grid",onViewModeChange:()=>{},hideBackgroundToggle:!0})}),e.jsx("div",{className:"igdb-game-detail-container",children:e.jsx("div",{className:"home-page-main-container igdb-game-detail-main-container",children:e.jsx("main",{className:"flex-1 home-page-content igdb-game-detail-content",children:e.jsx("div",{className:"home-page-layout igdb-game-detail-layout",children:e.jsx("div",{className:"home-page-content-wrapper igdb-game-detail-content-wrapper",children:e.jsxs("div",{className:"home-page-scroll-container igdb-game-detail-scroll-container",children:[e.jsxs("div",{className:"pt-8 igdb-game-detail-header",children:[e.jsx("div",{className:"igdb-game-detail-cover-wrapper",children:e.jsx(B,{title:t.name,coverUrl:l,width:a,height:d,showTitle:!1,titlePosition:"overlay",detail:!1,play:!1,showBorder:!1})}),e.jsx("div",{className:"igdb-game-detail-info-panel",style:{minHeight:`${d}px`},children:e.jsxs("div",{className:"igdb-game-detail-info-content",children:[e.jsx("h1",{className:"text-white igdb-game-detail-title",children:t.name}),i(t)&&(()=>{const x=(t.ageRatings&&t.ageRatings.length>0?W(t.ageRatings,g.language):[]).length>0;return e.jsxs("div",{className:"text-white igdb-game-detail-release-date",children:[i(t),x&&e.jsxs("span",{className:"igdb-game-detail-age-ratings-inline",children:["•   ",e.jsx(H,{ageRatings:t.ageRatings||[]})]})]})})(),u&&e.jsx(Y,{game:u}),v!==null||y!==null?e.jsxs("div",{className:"igdb-game-detail-ratings",children:[v!==null&&e.jsx(G,{text:m("gameDetail.criticRating"),children:e.jsxs("div",{className:"text-white igdb-game-detail-rating-item",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#FFD700",stroke:"#FFA500",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"igdb-game-detail-rating-icon",children:e.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})}),v]})}),y!==null&&e.jsx(G,{text:m("gameDetail.userRating"),children:e.jsxs("div",{className:"text-white igdb-game-detail-rating-item",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#4CAF50",stroke:"#2E7D32",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"igdb-game-detail-rating-icon",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),y]})})]}):null,e.jsx("div",{className:"game-detail-actions",children:e.jsxs("button",{onClick:p,disabled:h,className:"igdb-game-detail-mark-owned-button",children:[e.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"currentColor",className:"igdb-game-detail-mark-owned-button-icon",children:e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),m(h?"igdbGameDetail.adding":"igdbGameDetail.add")]})}),t.summary&&e.jsx(V,{summary:t.summary,maxLines:j})]})})]}),(t.screenshots&&t.screenshots.length>0||t.videos&&t.videos.length>0)&&e.jsx("div",{className:"igdb-game-detail-media-section",children:e.jsx(ee,{screenshots:t.screenshots,videos:t.videos})}),e.jsx("div",{className:"igdb-game-detail-info-section",children:e.jsx(Q,{game:t})})]})})})})})})]})}export{Y as G,oe as I,ee as M,Q as a};
