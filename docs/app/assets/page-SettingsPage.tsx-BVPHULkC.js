import{r as n,j as e}from"./react-vendor-jNdKP8wU.js";import{u as D,m as A}from"./page-CategoriesPage.tsx-PfePlHQa.js";import{A as x}from"./page-AddGamePage.tsx-SkGFkz5J.js";/* empty css                              */import{u as U}from"./i18n-vendor-mPXi0JFR.js";function B(){const{t,i18n:r}=U(),{setLoading:h,isLoading:E}=D(),[i,o]=n.useState("en"),[v,g]=n.useState(null),[j,w]=n.useState(!1),[a,S]=n.useState(""),[l,N]=n.useState(""),[f,C]=n.useState(null),[T,I]=n.useState(null),[b,y]=n.useState(!1),L=v!==null&&i!==v,_=f!==null&&a!==f||T!==null&&l!==T;n.useEffect(()=>{const s=localStorage.getItem("twitch_client_id")||"",u=localStorage.getItem("twitch_client_secret")||"";S(s),N(u),C(s),I(u);async function P(){h(!0);try{const m=new URL("/settings",x),c=await fetch(m.toString(),{headers:A({Accept:"application/json"})});if(c.ok){const p=(await c.json()).language||"en";o(p),g(p),r.changeLanguage(p)}else{const d=localStorage.getItem("language")||"en";o(d),g(d),r.changeLanguage(d)}}catch(m){console.error("Failed to load settings:",m);const c=localStorage.getItem("language")||"en";o(c),g(c),r.changeLanguage(c)}finally{h(!1)}}P()},[h]);async function F(){w(!0);try{const s=new URL("/settings",x);if(!(await fetch(s.toString(),{method:"PUT",headers:A({"Content-Type":"application/json"}),body:JSON.stringify({language:i})})).ok)throw new Error("Failed to save settings");localStorage.setItem("language",i),r.changeLanguage(i),g(i)}catch(s){console.error("Failed to save settings:",s),localStorage.setItem("language",i),r.changeLanguage(i),g(i)}finally{w(!1)}}function k(){if(!(!a.trim()||!l.trim())){y(!0);try{localStorage.setItem("twitch_client_id",a.trim()),localStorage.setItem("twitch_client_secret",l.trim()),C(a.trim()),I(l.trim());const s=x.replace(/\/$/,"");window.location.href=s}catch(s){console.error("Failed to save Twitch credentials:",s),y(!1)}}}return e.jsx("div",{className:"bg-[#1a1a1a] text-white settings-page",children:e.jsxs("div",{className:"settings-container",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("h1",{className:"settings-title",children:t("settings.title")}),e.jsx("p",{className:"settings-subtitle",children:t("settings.subtitle")})]}),e.jsxs("div",{className:"bg-[#1a1a1a] settings-card",children:[e.jsx("div",{className:"settings-card-header",children:e.jsx("h2",{className:"settings-card-title",children:t("settings.general")})}),e.jsxs("div",{className:"settings-card-content",children:[e.jsx("div",{className:"settings-field-small",children:e.jsxs("div",{className:"settings-label",children:[t("settings.version")," ","0.1.5"]})}),e.jsxs("div",{className:"settings-field",children:[e.jsxs("div",{className:"settings-field-row",children:[e.jsx("label",{className:"settings-label",htmlFor:"language-select",children:t("settings.language")}),e.jsxs("select",{id:"language-select",name:"language",value:i,onChange:s=>o(s.target.value),className:"settings-select",children:[e.jsx("option",{value:"en",children:t("settings.english")}),e.jsx("option",{value:"it",children:t("settings.italian")}),e.jsx("option",{value:"pt",children:t("settings.portuguese")}),e.jsx("option",{value:"es",children:t("settings.spanish")}),e.jsx("option",{value:"fr",children:t("settings.french")}),e.jsx("option",{value:"de",children:t("settings.german")}),e.jsx("option",{value:"zh",children:t("settings.chinese")}),e.jsx("option",{value:"ja",children:t("settings.japanese")})]})]}),e.jsx("p",{className:"settings-help-text",children:t("settings.selectLanguage")})]}),e.jsx("div",{className:"settings-actions",children:e.jsx("button",{onClick:F,className:`settings-button ${L?"settings-button-active":""}`,disabled:E||j||!L,children:t(j?"settings.saving":"settings.save")})})]})]}),e.jsxs("div",{className:"bg-[#1a1a1a] settings-card",style:{marginTop:"24px"},children:[e.jsx("div",{className:"settings-card-header",children:e.jsx("h2",{className:"settings-card-title",children:t("settings.twitch.title","Twitch OAuth")})}),e.jsxs("div",{className:"settings-card-content",children:[e.jsx("p",{className:"settings-help-text",style:{marginBottom:"24px"},children:t("settings.twitch.description","Configure your Twitch OAuth application credentials. You can get these from the Twitch Developer Console.")}),e.jsxs("div",{className:"settings-field",children:[e.jsx("label",{className:"settings-label",htmlFor:"twitch-client-id",children:t("settings.twitch.clientId","Client ID")}),e.jsx("input",{id:"twitch-client-id",type:"text",value:a,onChange:s=>S(s.target.value),className:"settings-input",placeholder:t("settings.twitch.clientIdPlaceholder","Enter your Twitch Client ID"),style:{marginTop:"8px"}}),e.jsx("p",{className:"settings-help-text",children:t("settings.twitch.clientIdHelp","Your Twitch application Client ID")})]}),e.jsxs("div",{className:"settings-field",children:[e.jsx("label",{className:"settings-label",htmlFor:"twitch-client-secret",children:t("settings.twitch.clientSecret","Client Secret")}),e.jsx("input",{id:"twitch-client-secret",type:"password",value:l,onChange:s=>N(s.target.value),className:"settings-input",placeholder:t("settings.twitch.clientSecretPlaceholder","Enter your Twitch Client Secret"),style:{marginTop:"8px"}}),e.jsx("p",{className:"settings-help-text",children:t("settings.twitch.clientSecretHelp","Your Twitch application Client Secret (keep this secure)")})]}),e.jsx("div",{className:"settings-actions",children:e.jsx("button",{onClick:k,className:`settings-button ${_?"settings-button-active":""}`,disabled:!a.trim()||!l.trim()||b||!_,children:t(b?"settings.saving":"settings.save")})})]})]})]})})}export{B as S};
