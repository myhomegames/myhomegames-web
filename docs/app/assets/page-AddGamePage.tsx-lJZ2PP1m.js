import{r as d,u as S,j as t}from"./react-vendor-jNdKP8wU.js";import{u as T}from"./i18n-vendor-mPXi0JFR.js";const W="https://localhost:41440",A=W;function y(){const e=localStorage.getItem("twitch_token");return e||""}function I(){return localStorage.getItem("twitch_client_id")}function k(){return localStorage.getItem("twitch_client_secret")}let C=y();function G(){C=y()}function f(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function z(e,i,u){if(e.year===null||e.year===void 0)return null;if(e.day!==null&&e.day!==void 0&&e.month!==null&&e.month!==void 0){const r=i(`months.${e.month}`,{defaultValue:e.month.toString()}),n=u?.language||i.language||"en";return n.startsWith("ja")?`${e.year}å¹´${e.month}æœˆ${e.day}æ—¥`:n.startsWith("zh")?`${e.year}å¹´${e.month}æœˆ${e.day}æ—¥`:n.startsWith("de")?`${e.day}. ${f(r)} ${e.year}`:n.startsWith("es")?`${e.day} de ${r} de ${e.year}`:n.startsWith("pt")?`${e.day} de ${r} de ${e.year}`:n.startsWith("it")||n.startsWith("fr")?`${e.day} ${r} ${e.year}`:`${f(r)} ${e.day}, ${e.year}`}return e.year.toString()}function v(e,i,u){if(e.releaseDateFull){const{day:r,month:n,year:s}=e.releaseDateFull;if(r!=null&&n!==null&&n!==void 0){const o=i(`months.${n}`,{defaultValue:n.toString()}),l=u?.language||i.language||"en";return l.startsWith("ja")?`${s}å¹´${n}æœˆ${r}æ—¥`:l.startsWith("zh")?`${s}å¹´${n}æœˆ${r}æ—¥`:l.startsWith("de")?`${r}. ${f(o)} ${s}`:l.startsWith("es")?`${r} de ${o} de ${s}`:l.startsWith("pt")?`${r} de ${o} de ${s}`:l.startsWith("it")||l.startsWith("fr")?`${r} ${o} ${s}`:`${f(o)} ${r}, ${s}`}if(s!=null)return s.toString()}if(e.releaseDate){const r=new Date(e.releaseDate*1e3);if(!isNaN(r.getTime()))return r.getFullYear().toString()}return null}function _({onGameSelected:e}){const{t:i,i18n:u}=T(),[r,n]=d.useState(""),[s,o]=d.useState([]),[l,x]=d.useState(null),[j,m]=d.useState(!1),c=d.useRef(null),b=S();d.useEffect(()=>()=>{c.current&&clearTimeout(c.current)},[]),d.useEffect(()=>{if(c.current&&clearTimeout(c.current),r.trim().length<2){o([]),m(!1);return}return m(!0),c.current=setTimeout(async()=>{try{const a=new URL("/igdb/search",A),h={"Content-Type":"application/json",Accept:"application/json","X-Auth-Token":y()},$=I(),g=k();$&&(h["X-Twitch-Client-Id"]=$),g&&(h["X-Twitch-Client-Secret"]=g);const p=await fetch(a.toString(),{method:"POST",headers:h,body:JSON.stringify({query:r.trim()})});if(!p.ok)throw new Error(`HTTP ${p.status}`);const N=await p.json();o(N.games||[]),x(null)}catch(a){x(String(a.message||a)),o([])}finally{m(!1)}},500),()=>{c.current&&clearTimeout(c.current)}},[r]);function w(a){e(a),b("/")}return t.jsx("div",{className:"bg-[#1a1a1a] text-white",style:{width:"100%",height:"100%",overflowY:"auto",overflowX:"hidden"},children:t.jsx("div",{className:"max-w-4xl mx-auto px-8 py-8",children:t.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg shadow-2xl overflow-hidden border border-[#2a2a2a] max-h-[80vh] flex flex-col",children:[t.jsx("div",{className:"p-6 border-b border-[#2a2a2a] bg-[#0d0d0d]",children:t.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Add Game"})}),t.jsxs("div",{className:"p-6 flex-1 overflow-hidden flex flex-col",children:[t.jsx("div",{className:"mb-4",children:t.jsx("input",{id:"add-game-page-search",name:"search",type:"text",value:r,onChange:a=>n(a.target.value),placeholder:"Search for a game...",className:"w-full bg-[#2a2a2a] border border-[#3a3a3a] rounded px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-[#E5A00D] transition-colors",autoFocus:!0})}),l&&t.jsx("div",{className:"mb-4 text-red-400 text-sm",children:l}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:j?t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"48px 24px"},children:[t.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid rgba(255, 255, 255, 0.1)",borderTopColor:"#FFB300",borderRadius:"50%",animation:"spin 0.8s linear infinite",marginBottom:"16px"}}),t.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)"},children:i("addGame.loading","Searching...")}),t.jsx("style",{children:`
                    @keyframes spin {
                      to { transform: rotate(360deg); }
                    }
                  `})]}):s.length===0&&r.trim().length>=2?t.jsx("div",{className:"text-center text-gray-400 py-8",children:i("table.noGames")}):s.length===0?t.jsx("div",{className:"text-center text-gray-400 py-8",children:i("addGame.typeToSearch")}):t.jsx("div",{className:"grid grid-cols-1 gap-3",children:s.map(a=>t.jsxs("button",{onClick:()=>w(a),className:"flex items-center gap-4 p-4 bg-[#2a2a2a] rounded hover:bg-[#3a3a3a] transition-colors text-left",children:[a.cover?t.jsx("img",{src:a.cover,alt:a.name,className:"w-20 h-28 object-cover rounded flex-shrink-0",onError:h=>{h.target.style.display="none"}}):t.jsx("div",{className:"w-20 h-28 bg-[#1a1a1a] rounded flex items-center justify-center flex-shrink-0",children:t.jsx("div",{className:"text-gray-500 text-2xl",children:"ðŸŽ®"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-white font-medium text-lg mb-1",children:a.name}),v(a,i,u)&&t.jsx("div",{className:"text-gray-400 text-sm mb-2",children:v(a,i,u)}),a.summary&&t.jsx("div",{className:"text-gray-300 text-sm line-clamp-2",children:a.summary})]})]},a.id))})})]})]})})})}export{A,C as a,I as b,k as c,v as d,_ as e,z as f,y as g,G as u};
