import{u as j,r as e,j as t}from"./react-vendor-jNdKP8wU.js";import{u as y,a as L,b as D,c as f,C as N,d as S,A}from"./page-CollectionsPage.tsx-DjVo-48O.js";function w({coverSize:u}){const{setLoading:p}=y(),{developers:l,isLoading:i,updateDeveloper:v}=L(),h=j(),[n,g]=e.useState(!1),[c]=e.useState(!0),o=e.useRef(null),m=e.useRef(new Map);e.useEffect(()=>{p(i||!n)},[i,n,p]),D(o);function x(a){h(`/developers/${a.id}`)}const d=e.useMemo(()=>[...l.filter((s,r,C)=>r===C.findIndex(R=>String(R.id)===String(s.id)))].sort((s,r)=>c?f(s.title||"",r.title||""):-f(s.title||"",r.title||"")),[l,c]);return e.useLayoutEffect(()=>{i?g(!1):requestAnimationFrame(()=>{requestAnimationFrame(()=>g(!0))})},[i,d.length]),t.jsx("main",{className:"flex-1 home-page-content",children:t.jsxs("div",{className:"home-page-layout",children:[t.jsx("div",{className:"home-page-content-wrapper",style:{opacity:n?1:0,transition:"opacity 0.2s ease-in-out"},children:t.jsx("div",{ref:o,className:"home-page-scroll-container",children:t.jsx(N,{collections:d,onCollectionClick:x,isLoading:i,showEdit:!0,gamesPath:"developers",onCollectionUpdate:a=>v({...a,gameCount:l.find(s=>String(s.id)===String(a.id))?.gameCount}),buildCoverUrl:S,coverSize:u,itemRefs:m,scrollContainerRef:o})})}),n&&t.jsx(A,{games:d,scrollContainerRef:o,itemRefs:m,ascending:c,virtualizedGridRef:o.current?.__virtualizedGridRef,viewMode:"grid",coverSize:u})]})})}export{w as D};
