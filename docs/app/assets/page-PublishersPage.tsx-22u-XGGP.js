import{u as j,r as e,j as t}from"./react-vendor-jNdKP8wU.js";import{u as v,j as P,b as y,c as h,C as L,d as N,A as S}from"./page-CollectionsPage.tsx-DjVo-48O.js";function q({coverSize:d}){const{setLoading:g}=v(),{publishers:l,isLoading:i,updatePublisher:p}=P(),x=j(),[o,m]=e.useState(!1),[u]=e.useState(!0),a=e.useRef(null),f=e.useRef(new Map);e.useEffect(()=>{g(i||!o)},[i,o,g]),y(a);function b(n){x(`/publishers/${n.id}`)}const c=e.useMemo(()=>[...l.filter((s,r,C)=>r===C.findIndex(R=>String(R.id)===String(s.id)))].sort((s,r)=>u?h(s.title||"",r.title||""):-h(s.title||"",r.title||"")),[l,u]);return e.useLayoutEffect(()=>{i?m(!1):requestAnimationFrame(()=>{requestAnimationFrame(()=>m(!0))})},[i,c.length]),t.jsx("main",{className:"flex-1 home-page-content",children:t.jsxs("div",{className:"home-page-layout",children:[t.jsx("div",{className:"home-page-content-wrapper",style:{opacity:o?1:0,transition:"opacity 0.2s ease-in-out"},children:t.jsx("div",{ref:a,className:"home-page-scroll-container",children:t.jsx(L,{collections:c,onCollectionClick:b,isLoading:i,showEdit:!0,gamesPath:"publishers",onCollectionUpdate:n=>p({...n,gameCount:l.find(s=>String(s.id)===String(n.id))?.gameCount}),buildCoverUrl:N,coverSize:d,itemRefs:f,scrollContainerRef:a})})}),o&&t.jsx(S,{games:c,scrollContainerRef:a,itemRefs:f,ascending:u,virtualizedGridRef:a.current?.__virtualizedGridRef,viewMode:"grid",coverSize:d})]})})}export{q as P};
