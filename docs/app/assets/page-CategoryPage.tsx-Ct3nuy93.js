import{r,j as t,b as dt,c as Ae,d as ut}from"./react-vendor-jNdKP8wU.js";import{u as Re,a as Ke,b as le,C as Se,D as De,c as ft,d as gt,e as Je,f as ze,A as Ze,g as Xe,T as Te,h as qe}from"./page-CategoriesPage.tsx-PfePlHQa.js";import{A as te,g as ve,b as de,f as Ce}from"./page-AddGamePage.tsx-SkGFkz5J.js";import{u as F}from"./i18n-vendor-mPXi0JFR.js";function ht({selectedTags:e,onTagsChange:s,disabled:n=!1,placeholder:o}){const{t:l}=F(),{setLoading:i}=Re(),{categories:a,addCategory:g}=Ke(),[c,d]=r.useState(""),[u,y]=r.useState(!1);async function b(f){try{i(!0),y(!0);const m=le(te,"/categories"),v=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Auth-Token":ve()},body:JSON.stringify({title:f})});if(!v.ok){const O=await v.json();throw new Error(O.error||`HTTP ${v.status}`)}const h=(await v.json()).category,j=typeof h=="string"?h:h.title,L=typeof h=="string"?h:h.id;return g({id:L,title:j}),j}catch(m){return console.error("Error creating category:",m),null}finally{i(!1),y(!1)}}const x=f=>{s(e.filter(m=>m!==f))},p=f=>{e.includes(f)||(s([...e,f]),d(""))},S=async f=>{if(f.key==="Enter"&&c.trim()&&!u){f.preventDefault();const m=c.trim().toLowerCase(),v=a.find(h=>{const j=h.title.toLowerCase(),L=l(`genre.${h.title}`,h.title).toLowerCase();return j===m||L===m||L.includes(m)});if(v&&!e.includes(v.title)){p(v.title);return}const E=await b(c.trim());E&&!e.includes(E)&&p(E)}},w=a.filter(f=>{if(e.includes(f.title))return!1;const m=c.toLowerCase(),v=f.title.toLowerCase(),E=l(`genre.${f.title}`,f.title).toLowerCase();return v.includes(m)||E.includes(m)});return t.jsxs("div",{className:"tag-editor-container",children:[t.jsxs("div",{className:"tag-editor-tags",children:[e.map(f=>{const m=a.find(E=>E.title===f),v=m?l(`genre.${m.title}`,m.title):f;return t.jsxs("span",{className:"tag-editor-tag",children:[v,t.jsx("button",{type:"button",className:"tag-editor-tag-remove",onClick:()=>x(f),disabled:n,children:"×"})]},f)}),t.jsx("input",{id:"tag-editor-input",name:"tag",type:"text",value:c,onChange:f=>d(f.target.value),onKeyDown:S,disabled:n,placeholder:o||l("gameDetail.addGenre","Add genre..."),className:"tag-editor-input"})]}),c&&w.length>0&&t.jsx("div",{className:"tag-editor-suggestions",children:w.slice(0,5).map(f=>t.jsx("button",{type:"button",className:"tag-editor-suggestion",onClick:()=>p(f.title),disabled:n,children:l(`genre.${f.title}`,f.title)},f.id))})]})}function Ee({isOpen:e,onClose:s,game:n,onGameUpdate:o}){const{t:l}=F(),{setLoading:i}=Re(),[a,g]=r.useState(n.title),[c,d]=r.useState(n.summary||""),[u,y]=r.useState(n.year?.toString()||""),[b,x]=r.useState(n.month?.toString()||""),[p,S]=r.useState(n.day?.toString()||""),[w,f]=r.useState(Array.isArray(n.genre)?n.genre:n.genre?[n.genre]:[]),[m,v]=r.useState(!1),[E,h]=r.useState(null),[j,L]=r.useState("INFO"),[O,C]=r.useState(!1),[N,T]=r.useState(!1),R=r.useRef(null),D=r.useRef(null),[A,G]=r.useState(null),[I,M]=r.useState(null),[W,K]=r.useState(null),[Z,se]=r.useState(null),[J,X]=r.useState(!1),[_,Y]=r.useState(!1),[Q,q]=r.useState(Date.now()),ne=r.useMemo(()=>{if(!n?.cover)return"";const k=n.cover.split("?")[0].split("&")[0];if(k.startsWith("http"))return"";const $=le(te,k),B=$.includes("?")?"&":"?";return`${$}${B}t=${Q}`},[n?.cover,Q]),pe=r.useMemo(()=>{if(!n?.background)return"";const k=n.background.split("?")[0].split("&")[0];if(k.startsWith("http"))return"";const $=le(te,k),B=$.includes("?")?"&":"?";return`${$}${B}t=${Q}`},[n?.background,Q]);r.useEffect(()=>{e&&(g(n.title),d(n.summary||""),y(n.year?.toString()||""),x(n.month?.toString()||""),S(n.day?.toString()||""),f(Array.isArray(n.genre)?n.genre:n.genre?[n.genre]:[]),h(null),L("INFO"),G(null),M(null),K(null),se(null),X(!1),Y(!1),q(Date.now()))},[e,n]),r.useEffect(()=>{n&&(!n.cover&&!J&&!W&&(X(!0),G(null),q(Date.now())),!n.background&&!_&&!Z&&(Y(!0),M(null),q(Date.now())))},[n?.cover,n?.background]),r.useEffect(()=>{if(!e)return;function k($){$.key==="Escape"&&($.stopPropagation(),s())}return document.addEventListener("keydown",k,!0),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",k,!0),document.body.style.overflow=""}},[e,s]);const je=()=>{if(a!==n.title||c!==(n.summary||"")||u!==(n.year?.toString()||"")||b!==(n.month?.toString()||"")||p!==(n.day?.toString()||""))return!0;const k=Array.isArray(n.genre)?n.genre:n.genre?[n.genre]:[];return!!(JSON.stringify(w.sort())!==JSON.stringify(k.sort())||W||Z||J||_)},Me=async()=>{v(!0),h(null),i(!0);try{let k=null,$=null;if(J)try{const P=le(te,`/games/${n.id}/delete-cover`),V=await fetch(P,{method:"DELETE",headers:{"X-Auth-Token":ve()||""}});if(!V.ok){const U=await V.json().catch(()=>({error:"Failed to remove cover"}));throw new Error(U.error||"Failed to remove cover")}const H=await V.json();H.game&&(k=H.game.cover||null)}catch(P){h(String(P.message||P)),v(!1),i(!1);return}if(_)try{const P=le(te,`/games/${n.id}/delete-background`),V=await fetch(P,{method:"DELETE",headers:{"X-Auth-Token":ve()||""}});if(!V.ok){const U=await V.json().catch(()=>({error:"Failed to remove background"}));throw new Error(U.error||"Failed to remove background")}const H=await V.json();H.game&&($=H.game.background||null)}catch(P){h(String(P.message||P)),v(!1),i(!1);return}if(W){C(!0);try{const P=new FormData;P.append("file",W);const V=le(te,`/games/${n.id}/upload-cover`),H=await fetch(V,{method:"POST",headers:{"X-Auth-Token":ve()||""},body:P});if(!H.ok){const ee=await H.json().catch(()=>({error:"Failed to upload cover"}));throw new Error(ee.error||"Failed to upload cover")}const U=await H.json();U.game&&(k=U.game.cover||null,U.game.background&&($=U.game.background))}catch(P){C(!1),i(!1),v(!1),h(String(P.message||P));return}finally{C(!1)}}if(Z){T(!0);try{const P=new FormData;P.append("file",Z);const V=le(te,`/games/${n.id}/upload-background`),H=await fetch(V,{method:"POST",headers:{"X-Auth-Token":ve()||""},body:P});if(!H.ok){const ee=await H.json().catch(()=>({error:"Failed to upload background"}));throw new Error(ee.error||"Failed to upload background")}const U=await H.json();U.game&&($=U.game.background||null,U.game.cover&&!k&&(k=U.game.cover))}catch(P){T(!1),i(!1),v(!1),h(String(P.message||P));return}finally{T(!1)}}const B={};a!==n.title&&(B.title=a),c!==(n.summary||"")&&(B.summary=c),u!==(n.year?.toString()||"")&&(B.year=u?parseInt(u,10):null),b!==(n.month?.toString()||"")&&(B.month=b?parseInt(b,10):null),p!==(n.day?.toString()||"")&&(B.day=p?parseInt(p,10):null);const ie=Array.isArray(n.genre)?n.genre:n.genre?[n.genre]:[];if(JSON.stringify(w.sort())!==JSON.stringify(ie.sort())&&(B.genre=w.length===1?w[0]:w),Object.keys(B).length>0){const P=le(te,`/games/${n.id}`),V=await fetch(P,{method:"PUT",headers:{"Content-Type":"application/json","X-Auth-Token":de},body:JSON.stringify(B)});if(!V.ok){const ae=await V.json();throw new Error(ae.error||"Failed to update game")}const H=await V.json();let U=k!==null?k:H.game.cover,ee=$!==null?$:H.game.background;if(k&&U){const ae=U.includes("?")?"&":"?";U=`${U}${ae}t=${Date.now()}`}if($&&ee){const ae=ee.includes("?")?"&":"?";ee=`${ee}${ae}t=${Date.now()}`}const oe={id:H.game.id,title:H.game.title,summary:H.game.summary,cover:U,background:ee,day:H.game.day,month:H.game.month,year:H.game.year,stars:H.game.stars,genre:H.game.genre,criticratings:H.game.criticratings||null,userratings:H.game.userratings||null,executables:H.game.executables||null,themes:H.game.themes??n.themes??null,platforms:H.game.platforms??n.platforms??null,gameModes:H.game.gameModes??n.gameModes??null,playerPerspectives:H.game.playerPerspectives??n.playerPerspectives??null,websites:H.game.websites??n.websites??null,ageRatings:H.game.ageRatings??n.ageRatings??null,developers:H.game.developers??n.developers??null,publishers:H.game.publishers??n.publishers??null,franchise:H.game.franchise??n.franchise??null,collection:H.game.collection??n.collection??null,screenshots:H.game.screenshots??n.screenshots??null,videos:H.game.videos??n.videos??null,gameEngines:H.game.gameEngines??n.gameEngines??null,keywords:H.game.keywords??n.keywords??null,alternativeNames:H.game.alternativeNames??n.alternativeNames??null,similarGames:H.game.similarGames??n.similarGames??null};if(B.genre!==void 0){const ae=Array.isArray(n.genre)?n.genre:n.genre?[n.genre]:[],Le=Array.isArray(oe.genre)?oe.genre:oe.genre?[oe.genre]:[],He=ae.filter(fe=>!Le.includes(fe));for(const fe of He)try{const ge=le(te,`/categories/${encodeURIComponent(fe)}`),re=await fetch(ge,{method:"DELETE",headers:{Accept:"application/json","X-Auth-Token":de}});re.ok||(re.status===409?await re.json().catch(()=>{}):await re.json().catch(()=>{}))}catch{}}o(oe)}else if(W||Z||J||_){let P=k??n.cover,V=$??n.background;if(W&&(!P||P==="")||Z&&(!V||V==="")||J&&P===void 0||_&&V===void 0){const U=le(te,`/games/${n.id}`),ee=await fetch(U,{method:"GET",headers:{Accept:"application/json","X-Auth-Token":de}});if(ee.ok){const oe=await ee.json();(W||J)&&P===void 0&&(P=oe.game.cover||null),(Z||_)&&V===void 0&&(V=oe.game.background||null)}}if((W||J)&&P){const U=P.includes("?")?"&":"?";P=`${P}${U}t=${Date.now()}`}if((Z||_)&&V){const U=V.includes("?")?"&":"?";V=`${V}${U}t=${Date.now()}`}const H={...n,cover:P,background:V};o(H)}G(null),M(null),K(null),se(null),X(!1),Y(!1),s()}catch(k){h(String(k.message||k))}finally{v(!1),i(!1)}},Oe=k=>{const $=k.target.files?.[0];if($){if(!$.type.startsWith("image/")){h(l("gameDetail.invalidImageType","File must be an image")),k.target.value="";return}const B=new FileReader;B.onloadend=()=>{G(B.result)},B.readAsDataURL($),K($),X(!1),h(null),k.target.value=""}},Be=k=>{const $=k.target.files?.[0];if($){if(!$.type.startsWith("image/")){h(l("gameDetail.invalidImageType","File must be an image")),k.target.value="";return}const B=new FileReader;B.onloadend=()=>{M(B.result)},B.readAsDataURL($),se($),Y(!1),h(null),k.target.value=""}},Ge=()=>{X(!0),G(null),K(null),q(Date.now())},z=()=>{Y(!0),M(null),se(null),q(Date.now())};return e?dt.createPortal(t.jsx("div",{className:"edit-game-modal-overlay",onClick:s,children:t.jsxs("div",{className:"edit-game-modal-container",onClick:k=>k.stopPropagation(),children:[t.jsxs("div",{className:"edit-game-modal-header",children:[t.jsxs("h2",{children:[t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"8px",verticalAlign:"middle"},children:[t.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),l("gameDetail.editGame","Edit Game")]}),t.jsx("button",{className:"edit-game-modal-close",onClick:s,"aria-label":"Close",children:"×"})]}),t.jsxs("div",{className:"edit-game-modal-content",children:[E&&t.jsx("div",{className:"edit-game-modal-error",children:E}),t.jsxs("div",{className:"edit-game-modal-tabs",children:[t.jsx("button",{className:`edit-game-modal-tab ${j==="INFO"?"active":""}`,onClick:()=>L("INFO"),disabled:m,children:l("gameDetail.info","INFO")}),t.jsx("button",{className:`edit-game-modal-tab ${j==="MEDIA"?"active":""}`,onClick:()=>L("MEDIA"),disabled:m,children:l("gameDetail.media","MEDIA")})]}),j==="INFO"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"edit-game-modal-field",children:[t.jsx("label",{htmlFor:"edit-game-title",children:l("gameDetail.title","Title")}),t.jsx("input",{id:"edit-game-title",name:"title",type:"text",value:a,onChange:k=>g(k.target.value),disabled:m})]}),t.jsxs("div",{className:"edit-game-modal-field",children:[t.jsx("label",{htmlFor:"edit-game-summary",children:l("gameDetail.summary","Summary")}),t.jsx("textarea",{id:"edit-game-summary",name:"summary",value:c,onChange:k=>d(k.target.value),disabled:m,rows:5})]}),t.jsxs("div",{className:"edit-game-modal-row",children:[t.jsxs("div",{className:"edit-game-modal-field",children:[t.jsx("label",{htmlFor:"edit-game-year",children:l("gameDetail.year","Year")}),t.jsx("input",{id:"edit-game-year",name:"year",type:"number",value:u,onChange:k=>y(k.target.value),disabled:m,placeholder:"YYYY"})]}),t.jsxs("div",{className:"edit-game-modal-field",children:[t.jsx("label",{htmlFor:"edit-game-month",children:l("gameDetail.month","Month")}),t.jsx("input",{id:"edit-game-month",name:"month",type:"number",value:b,onChange:k=>x(k.target.value),disabled:m,placeholder:"MM",min:"1",max:"12"})]}),t.jsxs("div",{className:"edit-game-modal-field",children:[t.jsx("label",{htmlFor:"edit-game-day",children:l("gameDetail.day","Day")}),t.jsx("input",{id:"edit-game-day",name:"day",type:"number",value:p,onChange:k=>S(k.target.value),disabled:m,placeholder:"DD",min:"1",max:"31"})]})]}),t.jsxs("div",{className:"edit-game-modal-field",children:[t.jsx("div",{className:"edit-game-modal-label",children:l("gameDetail.genre","Genre")}),e&&t.jsx(ht,{selectedTags:w,onTagsChange:f,disabled:m},`tag-editor-${n.id}-${e}`)]})]}),j==="MEDIA"&&t.jsxs("div",{className:"edit-game-modal-media",children:[t.jsxs("div",{className:"edit-game-modal-media-row",children:[t.jsxs("div",{className:"edit-game-modal-media-info",children:[t.jsx("div",{className:"edit-game-modal-label",children:l("gameDetail.cover","Cover")}),t.jsx("div",{className:"edit-game-modal-media-description",children:l("gameDetail.coverFormat","Recommended format: WebP, ratio 2:3 (e.g., 400x600px)")})]}),t.jsx("div",{className:"edit-game-modal-media-image-container",children:(()=>{const k=J?"":A||ne,$=k&&k.trim()!=="";return t.jsxs(t.Fragment,{children:[t.jsx(Se,{title:n.title,coverUrl:k,width:150,height:200,showTitle:!1,detail:!1,play:!1,showBorder:!0,aspectRatio:"3/4",onUpload:()=>!O&&!m&&R.current?.click(),uploading:O,showRemoveButton:!!$&&!J&&!0,removeMediaType:"cover",removeResourceId:n.id,removeResourceType:"games",onGameUpdate:o,onRemoveSuccess:Ge,removeDisabled:m||O},`cover-${J?"removed":A?"preview":ne}`),t.jsx("input",{ref:R,id:"edit-game-cover-input",name:"cover",type:"file",accept:"image/*",style:{display:"none"},onChange:Oe})]})})()})]}),t.jsxs("div",{className:"edit-game-modal-media-row",children:[t.jsxs("div",{className:"edit-game-modal-media-info",children:[t.jsx("div",{className:"edit-game-modal-label",children:l("gameDetail.background","Background")}),t.jsx("div",{className:"edit-game-modal-media-description",children:l("gameDetail.backgroundFormat","Recommended format: WebP, ratio 16:9 (e.g., 1920x1080px)")})]}),t.jsx("div",{className:"edit-game-modal-media-image-container",children:(()=>{const k=_?"":I||pe,$=k&&k.trim()!=="";return t.jsxs(t.Fragment,{children:[t.jsx(Se,{title:n.title,coverUrl:k,width:300,height:169,showTitle:!1,detail:!1,play:!1,showBorder:!0,aspectRatio:"16/9",onUpload:()=>!N&&!m&&D.current?.click(),uploading:N,showRemoveButton:!!$&&!_&&!0,removeMediaType:"background",removeResourceId:n.id,removeResourceType:"games",onGameUpdate:o,onRemoveSuccess:z,removeDisabled:m||N},`background-${_?"removed":I?"preview":pe}`),t.jsx("input",{ref:D,id:"edit-game-background-input",name:"background",type:"file",accept:"image/*",style:{display:"none"},onChange:Be})]})})()})]})]})]}),t.jsxs("div",{className:"edit-game-modal-footer",children:[t.jsx("button",{className:"edit-game-modal-cancel",onClick:s,disabled:m,children:l("common.cancel","Cancel")}),t.jsx("button",{className:"edit-game-modal-save",onClick:Me,disabled:m||!je(),children:m?l("common.saving","Saving..."):l("common.save","Save")})]})]})}),document.body):null}function Fe({rating:e,starSize:s=16,gap:n=4,color:o="#ffffff",noStroke:l=!1,readOnly:i=!0,onRatingChange:a}){const[g,c]=r.useState(null),d=(x,p)=>{if(!i&&a){const w=(p?x-.5:x)*2;a(w)}},u=(x,p)=>{if(!i){const S=p?x-.5:x;c(S)}},y=()=>{i||c(null)},b=g!==null?g:e;return t.jsx("div",{style:{display:"flex",alignItems:"center",gap:`${n}px`},onMouseLeave:y,children:[1,2,3,4,5].map(x=>{const p=b>=x,S=b>=x-.5&&b<x,w=`star-${x}-${b}`;return t.jsxs("div",{style:{position:"relative",width:`${s}px`,height:`${s}px`,cursor:i?"default":"pointer"},children:[t.jsx("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"rgba(255, 255, 255, 0.3)",strokeWidth:"1.5",style:{position:"absolute",top:0,left:0},children:t.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),!i&&t.jsx("div",{style:{position:"absolute",top:0,left:0,width:`${s/2}px`,height:`${s}px`,cursor:"pointer",zIndex:10},onClick:()=>d(x,!0),onMouseEnter:()=>u(x,!0)}),!i&&t.jsx("div",{style:{position:"absolute",top:0,right:0,width:`${s/2}px`,height:`${s}px`,cursor:"pointer",zIndex:10},onClick:()=>d(x,!1),onMouseEnter:()=>u(x,!1)}),p&&t.jsx("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:o,stroke:l?"none":o,strokeWidth:l?"0":"1.5",style:{position:"absolute",top:0,left:0,pointerEvents:"none"},children:t.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),S&&t.jsxs("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:l?"none":o,strokeWidth:l?"0":"1.5",style:{position:"absolute",top:0,left:0,pointerEvents:"none"},children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:w,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[t.jsx("stop",{offset:"50%",stopColor:o}),t.jsx("stop",{offset:"50%",stopColor:"transparent"})]})}),t.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z",fill:`url(#${w})`})]})]},x)})})}function mt({summary:e,truncateOnly:s=!1,maxLines:n=4,fontSize:o}){const{t:l}=F(),[i,a]=r.useState(!1),[g,c]=r.useState(!1),d=r.useRef(null);return r.useEffect(()=>{if(d.current&&!s){const y=parseFloat(getComputedStyle(d.current).lineHeight)*n;d.current.scrollHeight>y&&c(!0)}},[e,s,n]),e?t.jsxs("div",{style:{marginTop:"16px"},children:[t.jsx("div",{ref:d,className:"text-white",style:{opacity:.8,fontFamily:"var(--font-body-1-font-family)",fontSize:o||"var(--font-body-1-font-size)",lineHeight:"var(--font-body-1-line-height)",display:"-webkit-box",WebkitLineClamp:i?"none":n,WebkitBoxOrient:"vertical",overflow:i?"visible":"hidden",textOverflow:i?"clip":"ellipsis"},children:e}),g&&!s&&t.jsxs("button",{onClick:()=>a(!i),style:{backgroundColor:"transparent",border:"none",color:"#E5A00D",cursor:"pointer",padding:0,marginTop:"8px",fontFamily:"var(--font-body-1-font-family)",fontSize:"var(--font-body-1-font-size)",lineHeight:"var(--font-body-1-line-height)",display:"flex",alignItems:"center",gap:"4px"},children:[t.jsx("span",{children:l(i?"common.less":"common.more")}),t.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:i?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M7 10l5 5 5-5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}):null}const vt={en:1,it:2,es:2,fr:2,pt:2,de:4,ja:3,zh:1},pt={1:"ESRB",2:"PEGI",3:"CERO",4:"USK",5:"GRAC",6:"CLASS_IND",7:"ACB"},xt={1:{6:"EC",7:"E",8:"E10",9:"T",10:"M",11:"AO",12:"RP"},2:{1:"Three",2:"Seven",3:"Twelve",4:"Sixteen",5:"Eighteen"},3:{1:"A",2:"B",3:"C",4:"D",5:"Z"},4:{1:"Zero",2:"Six",3:"Twelve",4:"Sixteen",5:"Eighteen"},5:{1:"ALL",2:"Twelve",3:"Fifteen",4:"Eighteen"},6:{1:"L",2:"Ten",3:"Twelve",4:"Fourteen",5:"Sixteen",6:"Eighteen"},7:{1:"G",2:"PG",3:"M",4:"MA15",5:"R18"}};function Ye(e,s){const n=s.split("-")[0],o=vt[n]||1;return e.filter(l=>l&&l.category!==void 0&&l.category!==null&&l.rating!==void 0&&l.rating!==null&&l.category===o)}function ke(e,s,n){if(e==null||s===void 0||s===null)return"";const o=pt[e];if(!o)return`Category ${e} Rating ${s}`;const i=xt[e]?.[s];if(!i)return`${o} ${s}`;const a=`igdbInfo.ageRating.${o}.${i}`,g=n(a);return g!==a?g:`${o} ${i}`}function bt({ageRatings:e}){const{t:s,i18n:n}=F();if(!e||e.length===0)return null;const o=Ye(e,n.language);return o.length===0?null:t.jsx("div",{className:"age-ratings-list",children:o.map((l,i,a)=>{const g=ke(l.category,l.rating,s);return g?t.jsxs("span",{children:[t.jsx("span",{className:"age-rating-item",children:g}),i<a.length-1&&t.jsxs("span",{className:"age-rating-separator",children:[","," "]})]},i):null})})}const Qe=r.createContext(null);function yt(){const e=r.useContext(Qe);return e||{hasBackground:!1,isBackgroundVisible:!1,setBackgroundVisible:()=>{}}}const et="backgroundStates",tt=()=>{try{const e=localStorage.getItem(et);return e?JSON.parse(e):{}}catch{return{}}},wt=(e,s)=>{const n=tt();n[e]=s,localStorage.setItem(et,JSON.stringify(n))},We=(e,s)=>tt()[e]??s;function Es({backgroundUrl:e,hasBackground:s,elementId:n,children:o}){const[l,i]=r.useState(()=>We(n,s));r.useEffect(()=>{if(s){const c=We(n,s);i(c)}else i(!1)},[s,e,n]);const a=r.useCallback(c=>{i(c),wt(n,c)},[n]),g=r.useMemo(()=>({hasBackground:s,isBackgroundVisible:l,setBackgroundVisible:a}),[s,l,a]);return t.jsxs(Qe.Provider,{value:g,children:[t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:s&&l?"transparent":"#1a1a1a",backgroundImage:s&&l?`url(${e})`:void 0,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed",zIndex:0,cursor:s&&l?"pointer":"default"},onClick:()=>{s&&l&&a(!1)},children:s&&l&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(26, 26, 26, 0.85)",zIndex:1}}),t.jsx("img",{src:e,alt:"",style:{display:"none"}})]})}),t.jsx("div",{style:{position:"relative",zIndex:2},children:o})]})}function jt({value:e,onChange:s,min:n=100,max:o=200}){return t.jsx("div",{className:"cover-size-slider-container",children:t.jsx("input",{id:"cover-size-slider",name:"coverSize",type:"range",min:n,max:o,value:e,onChange:l=>s(Number(l.target.value)),className:"cover-size-slider"})})}function St({value:e,onChange:s,disabled:n=!1}){const{t:o,i18n:l}=F(),[i,a]=r.useState(!1),[g,c]=r.useState(!1),d=r.useRef(null),u=r.useMemo(()=>[{key:"grid",label:o("viewMode.grid"),icon:"⊞"},{key:"detail",label:o("viewMode.detail"),icon:"☰"},{key:"table",label:o("viewMode.table"),icon:"☷"}],[o,l.language]),y=u.find(b=>b.key===e)||u[0];return r.useEffect(()=>{function b(p){d.current&&!d.current.contains(p.target)&&a(!1)}function x(p){p.key==="Escape"&&a(!1)}if(i)return document.addEventListener("mousedown",b),document.addEventListener("keydown",x),()=>{document.removeEventListener("mousedown",b),document.removeEventListener("keydown",x)}},[i]),t.jsxs("div",{ref:d,className:"view-mode-selector",children:[t.jsxs("button",{onClick:()=>!n&&a(!i),type:"button",className:`view-mode-button ${n?"disabled":""}`,disabled:n,onMouseEnter:()=>{n||c(!0)},onMouseLeave:()=>{n||c(!1)},children:[t.jsx("span",{className:`view-mode-icon ${g&&!n?"hover":""}`,children:y.icon}),!n&&t.jsx("svg",{width:"12",height:"12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,className:`view-mode-arrow ${i?"open":""}`,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),i&&!n&&t.jsx("div",{className:"view-mode-dropdown",children:u.map(b=>t.jsxs("button",{onClick:()=>{s(b.key),a(!1)},type:"button",className:`view-mode-option ${e===b.key?"active":""}`,children:[t.jsx("span",{className:"view-mode-option-icon",children:b.icon}),t.jsx("span",{children:b.label})]},b.key))})]})}function Et({isVisible:e,onChange:s,disabled:n=!1}){const{t:o}=F();return t.jsx("button",{className:"background-toggle-button",onClick:()=>!n&&s(!e),disabled:n,"aria-label":o(e?"common.hideBackground":"common.showBackground"),title:o(e?"common.hideBackground":"common.showBackground"),children:t.jsx("span",{className:"background-toggle-icon",children:t.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e?t.jsx("path",{d:"M4 4h16v16H4V4zm2 2v12h12V6H6zm2 2h8v8H8V8z",fill:"currentColor"}):t.jsx("path",{d:"M4 4h16v16H4V4zm2 2v12h12V6H6z",fill:"currentColor",opacity:"0.5"})})})})}function kt({libraries:e,activeLibrary:s,onSelectLibrary:n,loading:o,error:l,coverSize:i=150,onCoverSizeChange:a,viewMode:g="grid",onViewModeChange:c,hideBackgroundToggle:d=!1,onReloadMetadata:u}){const{t:y}=F(),{isLoading:b}=Re(),{hasBackground:x,isBackgroundVisible:p,setBackgroundVisible:S}=yt(),w=o!==void 0?o:b,[f,m]=r.useState(!1),v=r.useRef(null),E=r.useRef(null);r.useEffect(()=>{if(!s){m(!1);return}const j=()=>{if(window.innerWidth<800){m(!0);return}if(v.current&&E.current){const C=v.current.offsetWidth,N=E.current.offsetWidth,T=C-N-180,R=e.length*110;m(T<R)}};j();const L=setTimeout(j,100);return window.addEventListener("resize",j),()=>{clearTimeout(L),window.removeEventListener("resize",j)}},[e,g,i,s]);const h=j=>{const L=e.find(O=>O.key===j.target.value);L&&n(L)};return t.jsx("div",{className:"mhg-libraries-bar",children:t.jsxs("div",{className:"mhg-libraries-bar-container",ref:v,children:[ve()&&t.jsx("div",{className:"mhg-libraries-menu-container",children:t.jsx(De,{className:"mhg-libraries-menu-dropdown",onReload:u})}),s&&t.jsx(t.Fragment,{children:f?t.jsxs("div",{className:"mhg-libraries-combobox-container",children:[w&&e.length===0?null:t.jsx("select",{id:"libraries-select",name:"library",className:"mhg-libraries-combobox",value:s?.key||"",onChange:h,children:e.map(j=>t.jsx("option",{value:j.key,children:j.title||y(`libraries.${j.key}`)},j.key))}),l&&t.jsx("div",{className:"mhg-libraries-error",children:l})]}):t.jsxs("div",{className:"mhg-libraries-container",children:[w&&e.length===0?null:e.map(j=>t.jsx("button",{className:`mhg-library-button ${s?.key===j.key?"mhg-library-active":""}`,onClick:()=>n(j),children:j.title||y(`libraries.${j.key}`)},j.key)),l&&t.jsx("div",{className:"mhg-libraries-error",children:l})]})}),t.jsxs("div",{className:"mhg-libraries-actions",ref:E,children:[x&&!d&&t.jsx("div",{className:"mhg-libraries-actions-background-toggle-container",children:t.jsx(Et,{isVisible:p,onChange:S})}),a&&t.jsx("div",{className:`mhg-libraries-actions-slider-container ${g==="grid"?"":"hidden"}`,children:t.jsx(jt,{value:i,onChange:a})}),c&&t.jsx("div",{className:"mhg-libraries-actions-view-mode-container",children:t.jsx(St,{value:g,onChange:c,disabled:s?s.key!=="library"&&s.key!=="category":!1})})]})]})})}function Rt({setGames:e,enabledEvents:s=["gameUpdated","gameDeleted","gameAdded"]}){const n=r.useRef(s);n.current=s,r.useEffect(()=>{const o=[];if(n.current.includes("gameUpdated")){const l=i=>{const g=i.detail?.game;g&&e(c=>c.map(d=>String(d.id)===String(g.id)?g:d))};window.addEventListener("gameUpdated",l),o.push({event:"gameUpdated",handler:l})}if(n.current.includes("gameDeleted")){const l=i=>{const g=i.detail?.gameId;g&&e(c=>c.filter(d=>String(d.id)!==String(g)))};window.addEventListener("gameDeleted",l),o.push({event:"gameDeleted",handler:l})}if(n.current.includes("gameAdded")){const l=i=>{const g=i.detail?.game;g&&e(c=>{const d={...g,id:String(g.id)},u=c.findIndex(y=>String(y.id)===String(d.id));if(u>=0){const y=[...c];return y[u]=d,y}else return[...c,d]})};window.addEventListener("gameAdded",l),o.push({event:"gameAdded",handler:l})}return()=>{o.forEach(({event:l,handler:i})=>{window.removeEventListener(l,i)})}},[e])}function Pe(e){return e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/g,"").trim():""}function Lt(e,s){const n=Pe(e||""),o=Pe(s||"");return n.localeCompare(o)}function Tt(e={}){const{localStoragePrefix:s="",defaultFilterField:n="all",waitForAuth:o=!1,onInit:l,listenToMetadataReload:i=!1,listenToGameDeleted:a=!1,gameEvents:g=["gameUpdated"],categoryId:c=null,onCategoryIdChange:d,scrollRestorationMode:u}=e,[y,b]=r.useState([]),[x,p]=r.useState(!1),[S,w]=r.useState(()=>s&&localStorage.getItem(`${s}FilterField`)||n),[f,m]=r.useState(()=>{if(s){const z=localStorage.getItem(`${s}SelectedYear`);return z?parseInt(z,10):null}return null}),[v,E]=r.useState(()=>{if(s){const z=localStorage.getItem(`${s}SelectedDecade`);return z?parseInt(z,10):null}return null}),[h,j]=r.useState(()=>{if(s){const z=localStorage.getItem(`${s}SelectedAgeRating`);return z!==null?z:null}return null}),[L,O]=r.useState(()=>s&&localStorage.getItem(`${s}SelectedCollection`)||null),[C,N]=r.useState(()=>s&&localStorage.getItem(`${s}SelectedGenre`)||null),{categories:T}=Ke(),R=r.useMemo(()=>T.map(z=>({id:String(z.id),title:z.title})),[T]),{collections:D,collectionGameIds:A}=ft(),{games:G,isLoading:I}=gt(),M=r.useMemo(()=>D.map(z=>({id:String(z.id),title:z.title||""})),[D]),[W,K]=r.useState([]),[Z,se]=r.useState(()=>s&&localStorage.getItem(`${s}SortField`)||"title"),[J,X]=r.useState(()=>{if(s){const z=localStorage.getItem(`${s}SortAscending`);return z?z==="true":!0}return!0}),_=r.useRef(null),Y=r.useRef(null),Q=r.useRef(new Map),[q,ne]=r.useState(()=>{const z=localStorage.getItem("tableColumnVisibility");if(z)try{return JSON.parse(z)}catch{return{title:!0,releaseDate:!0,year:!1,stars:!1,criticRating:!1,ageRating:!1}}return{title:!0,releaseDate:!0,criticRating:!1,ageRating:!1}});r.useEffect(()=>{localStorage.setItem("tableColumnVisibility",JSON.stringify(q))},[q]),r.useEffect(()=>{s&&localStorage.setItem(`${s}FilterField`,S)},[S,s]),r.useEffect(()=>{s&&f!==null?localStorage.setItem(`${s}SelectedYear`,f.toString()):s&&localStorage.removeItem(`${s}SelectedYear`)},[f,s]),r.useEffect(()=>{s&&C!==null?localStorage.setItem(`${s}SelectedGenre`,C):s&&localStorage.removeItem(`${s}SelectedGenre`)},[C,s]),r.useEffect(()=>{s&&v!==null?localStorage.setItem(`${s}SelectedDecade`,v.toString()):s&&localStorage.removeItem(`${s}SelectedDecade`)},[v,s]),r.useEffect(()=>{s&&L!==null?localStorage.setItem(`${s}SelectedCollection`,L):s&&localStorage.removeItem(`${s}SelectedCollection`)},[L,s]),r.useEffect(()=>{s&&h!==null?localStorage.setItem(`${s}SelectedAgeRating`,h):s&&localStorage.removeItem(`${s}SelectedAgeRating`)},[h,s]),r.useEffect(()=>{s&&localStorage.setItem(`${s}SortField`,Z)},[Z,s]),r.useEffect(()=>{s&&localStorage.setItem(`${s}SortAscending`,J.toString())},[J,s]),Je(u===void 0?_:u==="table"?Y:_,u),r.useEffect(()=>{o||l&&l()},[]),r.useEffect(()=>{if(!i)return;const z=()=>{};return window.addEventListener("metadataReloaded",z),()=>{window.removeEventListener("metadataReloaded",z)}},[i]),r.useEffect(()=>{if(!a)return;const z=k=>{const B=k.detail?.gameId;B&&b(ie=>ie.filter(P=>String(P.id)!==String(B)))};return window.addEventListener("gameDeleted",z),()=>{window.removeEventListener("gameDeleted",z)}},[a]),Rt({setGames:b,enabledEvents:g});const je=r.useMemo(()=>{let z=[...y];return S!=="all"&&(z=z.filter(k=>{switch(S){case"genre":return C!==null?Array.isArray(k.genre)?k.genre.some($=>(typeof $=="string"?$:String($))===C):typeof k.genre=="string"?k.genre===C:!1:!0;case"year":return f!==null?k.year===f:k.year!==null&&k.year!==void 0;case"decade":return v!==null&&k.year!==null&&k.year!==void 0?Math.floor(k.year/10)*10===v:!1;case"collection":if(L!==null){const $=A.get(String(L));if(!$)return!1;const B=String(k.id);return $.some(ie=>String(ie)===B)}return!1;case"ageRating":if(h!==null){const[$,B]=h.split("-").map(Number);return k.ageRatings&&k.ageRatings.length>0?k.ageRatings.some(ie=>ie.category===$&&ie.rating===B):!1}return!1;default:return!0}})),z.sort((k,$)=>{let B=0;switch(Z){case"title":B=Lt(k.title||"",$.title||"");break;case"year":const ie=k.year??0;B=($.year??0)-ie;break;case"stars":const V=k.stars??0;B=($.stars??0)-V;break;case"releaseDate":const U=k.year??0,ee=$.year??0;if(U!==ee)B=ee-U;else{const re=k.month??0,he=$.month??0;if(re!==he)B=he-re;else{const ct=k.day??0;B=($.day??0)-ct}}break;case"criticRating":const oe=k.criticratings??0;B=($.criticratings??0)-oe;break;case"userRating":const Le=k.userratings??0;B=($.userratings??0)-Le;break;case"ageRating":const fe=k.ageRatings&&k.ageRatings.length>0?k.ageRatings:[],ge=$.ageRatings&&$.ageRatings.length>0?$.ageRatings:[];if(fe.length===0&&ge.length===0)B=0;else if(fe.length===0)B=1;else if(ge.length===0)B=-1;else{const re=fe[0],he=ge[0];re.category!==he.category?B=re.category-he.category:B=he.rating-re.rating}break;default:B=0}return J?B:-B}),z},[y,S,C,f,v,L,h,A,Z,J]);return r.useLayoutEffect(()=>{I?I&&p(!1):requestAnimationFrame(()=>{requestAnimationFrame(()=>{p(!0)})})},[I,je.length]),r.useEffect(()=>{if(c&&R.length>0){const z=R.find(k=>String(k.id)===c);z&&(N(z.title),w("genre")),d&&d(c)}},[c,R,d]),r.useEffect(()=>{G.length>0&&b(G)},[G]),r.useEffect(()=>{if(y.length===0||R.length===0)return;const z=new Set;y.forEach($=>{$.genre&&(Array.isArray($.genre)?$.genre.forEach(B=>{typeof B=="string"?z.add(B):z.add(String(B))}):typeof $.genre=="string"&&z.add($.genre))});const k=R.filter($=>z.has($.title));K(k),C!==null&&S==="genre"&&(k.some(B=>B.title===C)||(N(null),w("all")))},[y,R,C,S]),{games:y,setGames:b,isReady:x,filterField:S,setFilterField:w,selectedYear:f,setSelectedYear:m,selectedDecade:v,setSelectedDecade:E,selectedCollection:L,setSelectedCollection:O,selectedAgeRating:h,setSelectedAgeRating:j,selectedGenre:C,setSelectedGenre:N,allGenres:R,availableGenres:W,availableCollections:M,sortField:Z,setSortField:se,sortAscending:J,setSortAscending:X,columnVisibility:q,setColumnVisibility:ne,filteredAndSortedGames:je,scrollContainerRef:_,tableScrollRef:Y,itemRefs:Q,handleTableSort:z=>{Z===z?X(!J):(se(z),X(!0))},toggleColumn:z=>{ne(k=>({...k,[z]:!k[z]}))},handleGameUpdate:z=>{b(k=>k.map($=>String($.id)===String(z.id)?z:$)),window.dispatchEvent(new CustomEvent("gameUpdated",{detail:{game:z}}))},handleGameDelete:z=>{b(k=>k.filter($=>$.id!==z.id))}}}function Nt(e){let s=e;for(;s;){if(s.dir)return s.dir==="rtl";s=s.parentElement}return!1}function It(e,s){const[n,o]=r.useState(s==="rtl");return r.useLayoutEffect(()=>{e&&(s||o(Nt(e)))},[s,e]),n}const ye=typeof window<"u"?r.useLayoutEffect:r.useEffect;function Ve(e){if(e!==void 0)switch(typeof e){case"number":return e;case"string":{if(e.endsWith("px"))return parseFloat(e);break}}}function Ct({box:e,defaultHeight:s,defaultWidth:n,disabled:o,element:l,mode:i,style:a}){const{styleHeight:g,styleWidth:c}=r.useMemo(()=>({styleHeight:Ve(a?.height),styleWidth:Ve(a?.width)}),[a?.height,a?.width]),[d,u]=r.useState({height:s,width:n}),y=o||i==="only-height"&&g!==void 0||i==="only-width"&&c!==void 0||g!==void 0&&c!==void 0;return ye(()=>{if(l===null||y)return;const b=new ResizeObserver(x=>{for(const p of x){const{contentRect:S,target:w}=p;l===w&&u(f=>f.height===S.height&&f.width===S.width?f:{height:S.height,width:S.width})}});return b.observe(l,{box:e}),()=>{b?.unobserve(l)}},[e,y,l,g,c]),r.useMemo(()=>({height:g??d.height,width:c??d.width}),[d,g,c])}function $t(e){const s=r.useRef(()=>{throw new Error("Cannot call during render.")});return ye(()=>{s.current=e},[e]),r.useCallback(n=>s.current?.(n),[s])}let me=null;function At(e=!1){if(me===null||e){const s=document.createElement("div"),n=s.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const o=document.createElement("div"),l=o.style;return l.width="100px",l.height="100px",s.appendChild(o),document.body.appendChild(s),s.scrollLeft>0?me="positive-descending":(s.scrollLeft=1,s.scrollLeft===0?me="negative":me="positive-ascending"),document.body.removeChild(s),me}return me}function Ne({containerElement:e,direction:s,isRtl:n,scrollOffset:o}){if(s==="horizontal"&&n)switch(At()){case"negative":return-o;case"positive-descending":{if(e){const{clientWidth:l,scrollLeft:i,scrollWidth:a}=e;return a-l-i}break}}return o}function ue(e,s="Assertion error"){if(!e)throw console.error(s),Error(s)}function be(e,s){if(e===s)return!0;if(!!e!=!!s||(ue(e!==void 0),ue(s!==void 0),Object.keys(e).length!==Object.keys(s).length))return!1;for(const n in e)if(!Object.is(s[n],e[n]))return!1;return!0}function st({cachedBounds:e,itemCount:s,itemSize:n}){if(s===0)return 0;if(typeof n=="number")return s*n;{const o=e.get(e.size===0?0:e.size-1);ue(o!==void 0,"Unexpected bounds cache miss");const l=(o.scrollOffset+o.size)/e.size;return s*l}}function Dt({align:e,cachedBounds:s,index:n,itemCount:o,itemSize:l,containerScrollOffset:i,containerSize:a}){if(n<0||n>=o)throw RangeError(`Invalid index specified: ${n}`,{cause:`Index ${n} is not within the range of 0 - ${o-1}`});const g=st({cachedBounds:s,itemCount:o,itemSize:l}),c=s.get(n),d=Math.max(0,Math.min(g-a,c.scrollOffset)),u=Math.max(0,c.scrollOffset-a+c.size);switch(e==="smart"&&(i>=u&&i<=d?e="auto":e="center"),e){case"start":return d;case"end":return u;case"center":return c.scrollOffset<=a/2?0:c.scrollOffset+c.size/2>=g-a/2?g-a:c.scrollOffset+c.size/2-a/2;case"auto":default:return i>=u&&i<=d?i:i<u?u:d}}function Ie({cachedBounds:e,containerScrollOffset:s,containerSize:n,itemCount:o,overscanCount:l}){const i=o-1;let a=0,g=-1,c=0,d=-1,u=0;for(;u<i;){const y=e.get(u);if(y.scrollOffset+y.size>s)break;u++}for(a=u,c=Math.max(0,a-l);u<i;){const y=e.get(u);if(y.scrollOffset+y.size>=s+n)break;u++}return g=Math.min(i,u),d=Math.min(o-1,g+l),a<0&&(a=0,g=-1,c=0,d=-1),{startIndexVisible:a,stopIndexVisible:g,startIndexOverscan:c,stopIndexOverscan:d}}function zt({itemCount:e,itemProps:s,itemSize:n}){const o=new Map;return{get(l){for(ue(l<e,`Invalid index ${l}`);o.size-1<l;){const a=o.size;let g;switch(typeof n){case"function":{g=n(a,s);break}case"number":{g=n;break}}if(a===0)o.set(a,{size:g,scrollOffset:0});else{const c=o.get(a-1);ue(c!==void 0,`Unexpected bounds cache miss for index ${l}`),o.set(a,{scrollOffset:c.scrollOffset+c.size,size:g})}}const i=o.get(l);return ue(i!==void 0,`Unexpected bounds cache miss for index ${l}`),i},set(l,i){o.set(l,i)},get size(){return o.size}}}function Mt({itemCount:e,itemProps:s,itemSize:n}){return r.useMemo(()=>zt({itemCount:e,itemProps:s,itemSize:n}),[e,s,n])}function Ot({containerSize:e,itemSize:s}){let n;switch(typeof s){case"string":{ue(s.endsWith("%"),`Invalid item size: "${s}"; string values must be percentages (e.g. "100%")`),ue(e!==void 0,"Container size must be defined if a percentage item size is specified"),n=e*parseInt(s)/100;break}default:{n=s;break}}return n}function $e({containerElement:e,containerStyle:s,defaultContainerSize:n=0,direction:o,isRtl:l=!1,itemCount:i,itemProps:a,itemSize:g,onResize:c,overscanCount:d}){const{height:u=n,width:y=n}=Ct({defaultHeight:o==="vertical"?n:void 0,defaultWidth:o==="horizontal"?n:void 0,element:e,mode:o==="vertical"?"only-height":"only-width",style:s}),b=r.useRef({height:0,width:0}),x=o==="vertical"?u:y,p=Ot({containerSize:x,itemSize:g});r.useLayoutEffect(()=>{if(typeof c=="function"){const N=b.current;(N.height!==u||N.width!==y)&&(c({height:u,width:y},{...N}),N.height=u,N.width=y)}},[u,c,y]);const S=Mt({itemCount:i,itemProps:a,itemSize:p}),w=r.useCallback(N=>S.get(N),[S]),[f,m]=r.useState(()=>Ie({cachedBounds:S,containerScrollOffset:0,containerSize:x,itemCount:i,overscanCount:d})),{startIndexVisible:v,startIndexOverscan:E,stopIndexVisible:h,stopIndexOverscan:j}={startIndexVisible:Math.min(i-1,f.startIndexVisible),startIndexOverscan:Math.min(i-1,f.startIndexOverscan),stopIndexVisible:Math.min(i-1,f.stopIndexVisible),stopIndexOverscan:Math.min(i-1,f.stopIndexOverscan)},L=r.useCallback(()=>st({cachedBounds:S,itemCount:i,itemSize:p}),[S,i,p]),O=r.useCallback(N=>{const T=Ne({containerElement:e,direction:o,isRtl:l,scrollOffset:N});return Ie({cachedBounds:S,containerScrollOffset:T,containerSize:x,itemCount:i,overscanCount:d})},[S,e,x,o,l,i,d]);ye(()=>{const N=(o==="vertical"?e?.scrollTop:e?.scrollLeft)??0;m(O(N))},[e,o,O]),ye(()=>{if(!e)return;const N=()=>{m(T=>{const{scrollLeft:R,scrollTop:D}=e,A=Ne({containerElement:e,direction:o,isRtl:l,scrollOffset:o==="vertical"?D:R}),G=Ie({cachedBounds:S,containerScrollOffset:A,containerSize:x,itemCount:i,overscanCount:d});return be(G,T)?T:G})};return e.addEventListener("scroll",N),()=>{e.removeEventListener("scroll",N)}},[S,e,x,o,i,d]);const C=$t(({align:N="auto",containerScrollOffset:T,index:R})=>{let D=Dt({align:N,cachedBounds:S,containerScrollOffset:T,containerSize:x,index:R,itemCount:i,itemSize:p});if(e){if(D=Ne({containerElement:e,direction:o,isRtl:l,scrollOffset:D}),typeof e.scrollTo!="function"){const A=O(D);be(f,A)||m(A)}return D}});return{getCellBounds:w,getEstimatedSize:L,scrollToIndex:C,startIndexOverscan:E,startIndexVisible:v,stopIndexOverscan:j,stopIndexVisible:h}}function nt(e){return r.useMemo(()=>e,Object.values(e))}function rt(e,s){const{ariaAttributes:n,style:o,...l}=e,{ariaAttributes:i,style:a,...g}=s;return be(n,i)&&be(o,a)&&be(l,g)}function Bt({cellComponent:e,cellProps:s,children:n,className:o,columnCount:l,columnWidth:i,defaultHeight:a=0,defaultWidth:g=0,dir:c,gridRef:d,onCellsRendered:u,onResize:y,overscanCount:b=3,rowCount:x,rowHeight:p,style:S,tagName:w="div",...f}){const m=nt(s),v=r.useMemo(()=>r.memo(e,rt),[e]),[E,h]=r.useState(null),j=It(E,c),{getCellBounds:L,getEstimatedSize:O,startIndexOverscan:C,startIndexVisible:N,scrollToIndex:T,stopIndexOverscan:R,stopIndexVisible:D}=$e({containerElement:E,containerStyle:S,defaultContainerSize:g,direction:"horizontal",isRtl:j,itemCount:l,itemProps:m,itemSize:i,onResize:y,overscanCount:b}),{getCellBounds:A,getEstimatedSize:G,startIndexOverscan:I,startIndexVisible:M,scrollToIndex:W,stopIndexOverscan:K,stopIndexVisible:Z}=$e({containerElement:E,containerStyle:S,defaultContainerSize:a,direction:"vertical",itemCount:x,itemProps:m,itemSize:p,onResize:y,overscanCount:b});r.useImperativeHandle(d,()=>({get element(){return E},scrollToCell({behavior:X="auto",columnAlign:_="auto",columnIndex:Y,rowAlign:Q="auto",rowIndex:q}){const ne=T({align:_,containerScrollOffset:E?.scrollLeft??0,index:Y}),pe=W({align:Q,containerScrollOffset:E?.scrollTop??0,index:q});typeof E?.scrollTo=="function"&&E.scrollTo({behavior:X,left:ne,top:pe})},scrollToColumn({align:X="auto",behavior:_="auto",index:Y}){const Q=T({align:X,containerScrollOffset:E?.scrollLeft??0,index:Y});typeof E?.scrollTo=="function"&&E.scrollTo({behavior:_,left:Q})},scrollToRow({align:X="auto",behavior:_="auto",index:Y}){const Q=W({align:X,containerScrollOffset:E?.scrollTop??0,index:Y});typeof E?.scrollTo=="function"&&E.scrollTo({behavior:_,top:Q})}}),[E,T,W]),r.useEffect(()=>{C>=0&&R>=0&&I>=0&&K>=0&&u&&u({columnStartIndex:N,columnStopIndex:D,rowStartIndex:M,rowStopIndex:Z},{columnStartIndex:C,columnStopIndex:R,rowStartIndex:I,rowStopIndex:K})},[u,C,N,R,D,I,M,K,Z]);const se=r.useMemo(()=>{const X=[];if(l>0&&x>0)for(let _=I;_<=K;_++){const Y=A(_),Q=[];for(let q=C;q<=R;q++){const ne=L(q);Q.push(r.createElement(v,{...m,ariaAttributes:{"aria-colindex":q+1,role:"gridcell"},columnIndex:q,key:q,rowIndex:_,style:{position:"absolute",left:j?void 0:0,right:j?0:void 0,transform:`translate(${j?-ne.scrollOffset:ne.scrollOffset}px, ${Y.scrollOffset}px)`,height:Y.size,width:ne.size}}))}X.push(t.jsx("div",{role:"row","aria-rowindex":_+1,children:Q},_))}return X},[v,m,l,C,R,L,A,j,x,I,K]),J=t.jsx("div",{"aria-hidden":!0,style:{height:G(),width:O(),zIndex:-1}});return r.createElement(w,{"aria-colcount":l,"aria-rowcount":x,role:"grid",...f,className:o,dir:c,ref:h,style:{position:"relative",maxHeight:"100%",maxWidth:"100%",flexGrow:1,overflow:"auto",...S}},se,n,J)}function Gt(e){return e!=null&&typeof e=="object"&&"getAverageRowHeight"in e&&typeof e.getAverageRowHeight=="function"}const Ht="data-react-window-index";function lt({children:e,className:s,defaultHeight:n=0,listRef:o,onResize:l,onRowsRendered:i,overscanCount:a=3,rowComponent:g,rowCount:c,rowHeight:d,rowProps:u,tagName:y="div",style:b,...x}){const p=nt(u),S=r.useMemo(()=>r.memo(g,rt),[g]),[w,f]=r.useState(null),m=Gt(d),v=r.useMemo(()=>m?D=>d.getRowHeight(D)??d.getAverageRowHeight():d,[m,d]),{getCellBounds:E,getEstimatedSize:h,scrollToIndex:j,startIndexOverscan:L,startIndexVisible:O,stopIndexOverscan:C,stopIndexVisible:N}=$e({containerElement:w,containerStyle:b,defaultContainerSize:n,direction:"vertical",itemCount:c,itemProps:p,itemSize:v,onResize:l,overscanCount:a});r.useImperativeHandle(o,()=>({get element(){return w},scrollToRow({align:D="auto",behavior:A="auto",index:G}){const I=j({align:D,containerScrollOffset:w?.scrollTop??0,index:G});typeof w?.scrollTo=="function"&&w.scrollTo({behavior:A,top:I})}}),[w,j]),ye(()=>{if(!w)return;const D=Array.from(w.children).filter((A,G)=>{if(A.hasAttribute("aria-hidden"))return!1;const I=`${L+G}`;return A.setAttribute(Ht,I),!0});if(m)return d.observeRowElements(D)},[w,m,d,L,C]),r.useEffect(()=>{L>=0&&C>=0&&i&&i({startIndex:O,stopIndex:N},{startIndex:L,stopIndex:C})},[i,L,O,C,N]);const T=r.useMemo(()=>{const D=[];if(c>0)for(let A=L;A<=C;A++){const G=E(A);D.push(r.createElement(S,{...p,ariaAttributes:{"aria-posinset":A+1,"aria-setsize":c,role:"listitem"},key:A,index:A,style:{position:"absolute",left:0,transform:`translateY(${G.scrollOffset}px)`,height:m?void 0:G.size,width:"100%"}}))}return D},[S,E,m,c,p,L,C]),R=t.jsx("div",{"aria-hidden":!0,style:{height:h(),width:"100%",zIndex:-1}});return r.createElement(y,{role:"list",...x,className:s,ref:f,style:{position:"relative",maxHeight:"100%",flexGrow:1,overflowY:"auto",...b}},T,e,R)}function Wt(e){try{const s=sessionStorage.getItem(e);if(!s)return null;const n=JSON.parse(s);return{scrollTop:n.scrollTop??0,scrollLeft:n.scrollLeft??0}}catch{return null}}function Pt(e,s,n){try{sessionStorage.setItem(e,JSON.stringify({scrollTop:s,scrollLeft:n}))}catch{}}const ce=40,Vt=2;function Ut({games:e,coverSize:s,containerRef:n,itemRefs:o,onGameClick:l,onPlay:i,onEditClick:a,onGameDelete:g,onGameUpdate:c,buildCoverUrl:d,allCollections:u=[],collectionId:y,onRemoveFromCollection:b}){const x=Ae(),[p,S]=r.useState({width:0,height:0}),[w,f]=r.useState(!1),m=r.useRef(null),v=r.useRef(!1),E=r.useRef(null),h=`${x.pathname}:grid`;r.useEffect(()=>{n&&"current"in n&&n.current&&(n.current.__virtualizedGridRef=m)},[n]);const j=r.useMemo(()=>{if(p.width===0)return 1;const T=s+ce;return Math.max(1,Math.floor((p.width+ce)/T))},[p.width,s]),L=r.useMemo(()=>Math.ceil(e.length/j),[e.length,j]),O=s,C=s*1.5+ce;r.useEffect(()=>{const T=()=>{if(n.current){const D=n.current.getBoundingClientRect();S({width:D.width-40,height:D.height||window.innerHeight-200})}};T(),window.addEventListener("resize",T);const R=new ResizeObserver(T);return n.current&&R.observe(n.current),()=>{window.removeEventListener("resize",T),R.disconnect()}},[n]),r.useEffect(()=>{const T=Wt(h);if(!T||T.scrollTop===0&&T.scrollLeft===0){f(!0);return}if(p.height===0||L===0||j===0)return;v.current=!0,f(!1);const R=(A=0)=>{const G=m.current;if(!G){A<50?setTimeout(()=>R(A+1),50):v.current=!1;return}let I=null;if(G.element)I=G.element;else if(n.current){const M=n.current.querySelector('[style*="overflow"]');M&&(M.scrollHeight>M.clientHeight||M.scrollWidth>M.clientWidth)&&(I=M)}if(!I){A<50?setTimeout(()=>R(A+1),50):(v.current=!1,f(!0));return}try{I.scrollTop=T.scrollTop,I.scrollLeft=T.scrollLeft,setTimeout(()=>{const M=I.scrollTop,W=I.scrollLeft;(Math.abs(M-T.scrollTop)>10||Math.abs(W-T.scrollLeft)>10)&&A<5&&(I.scrollTop=T.scrollTop,I.scrollLeft=T.scrollLeft),setTimeout(()=>{v.current=!1,f(!0)},50)},50)}catch{A<10?setTimeout(()=>R(A+1),100):v.current=!1}},D=setTimeout(()=>{R()},300);return()=>{clearTimeout(D),v.current=!1}},[x.pathname,h,p.height,L,j]),r.useEffect(()=>{let T=null,R=null;const D=(A=0)=>{const G=m.current;if(!G){A<20&&setTimeout(()=>D(A+1),100);return}let I=null;if(G.element)I=G.element;else if(n.current){const W=n.current.querySelector('[style*="overflow"]');W&&(W.scrollHeight>W.clientHeight||W.scrollWidth>W.clientWidth)&&(I=W)}if(!I){A<20&&setTimeout(()=>D(A+1),100);return}const M=()=>{v.current||(T&&clearTimeout(T),T=setTimeout(()=>{const W=I.scrollTop,K=I.scrollLeft;(!E.current||E.current.scrollTop!==W||E.current.scrollLeft!==K)&&(Pt(h,W,K),E.current={scrollTop:W,scrollLeft:K})},150))};I.addEventListener("scroll",M,{passive:!0}),R=()=>{T&&clearTimeout(T),I.removeEventListener("scroll",M)}};return D(),()=>{R&&R()}},[m.current,h,C,O,L,j]);const N=({columnIndex:T,rowIndex:R,style:D})=>{const A=R*j+T;if(A>=e.length)return t.jsx("div",{style:D});const G=e[A];return t.jsx("div",{style:{...D,paddingLeft:T===0?0:ce/2,paddingRight:T===j-1?0:ce/2,paddingTop:R===0?0:ce/2,paddingBottom:R===L-1?0:ce/2},children:t.jsx(it,{game:G,onGameClick:l,onPlay:i,onEditClick:a,onGameDelete:g,onGameUpdate:c,buildCoverUrl:d,coverSize:s,itemRefs:o,index:A,onDragStart:()=>{},onDragOver:()=>{},onDragEnd:()=>{},isDragging:!1,dragOverIndex:null,viewMode:"grid",allCollections:u,collectionId:y,onRemoveFromCollection:b})})};return p.width===0||p.height===0?t.jsx("div",{style:{width:"100%",height:"100%"}}):t.jsx("div",{style:{opacity:w?1:0,transition:w?"opacity 0.1s":"none"},children:t.jsx(Bt,{gridRef:m,className:"virtualized-games-grid",columnCount:j,columnWidth:O+ce,defaultHeight:p.height,defaultWidth:p.width,rowCount:L,rowHeight:C,overscanCount:Vt,cellComponent:N,cellProps:{},style:{height:p.height,width:p.width},onResize:T=>{S({width:T.width,height:T.height})}})})}const _t=100;function it({game:e,onGameClick:s,onPlay:n,onEditClick:o,onGameDelete:l,onGameUpdate:i,buildCoverUrl:a,coverSize:g,itemRefs:c,draggable:d=!1,index:u,onDragStart:y,onDragOver:b,onDragEnd:x,isDragging:p,dragOverIndex:S,viewMode:w,allCollections:f=[],collectionId:m,onRemoveFromCollection:v}){const E=g*1.5,h=r.useRef(e.cover),j=h.current!==e.cover;j&&(h.current=e.cover);const L=r.useMemo(()=>e.cover?a(te,e.cover,j):"",[e.cover,j,a]),O=R=>{d&&(R.dataTransfer.effectAllowed="move",R.dataTransfer.setData("text/html",u.toString()),y(u))},C=R=>{d&&(R.preventDefault(),R.dataTransfer.dropEffect="move",b(u))},N=()=>{d&&x()},T=S===u&&p;return t.jsx("div",{ref:R=>{R&&c?.current&&c.current.set(e.id,R)},className:`group cursor-pointer games-list-item ${d?"games-list-item-draggable":""} ${T?"games-list-item-drag-over":""}`,style:{width:`${g}px`,minWidth:`${g}px`},draggable:d,onDragStart:O,onDragOver:C,onDragEnd:N,onDragLeave:R=>{if(!d)return;const D=R.currentTarget.getBoundingClientRect(),A=R.clientX,G=R.clientY;(A<D.left||A>D.right||G<D.top||G>D.bottom)&&S===u&&b(-1)},children:t.jsx(Se,{title:e.title,coverUrl:L,width:g,height:E,onPlay:n?()=>n(e):void 0,onClick:()=>s(e),onEdit:()=>o(e),gameId:e.id,gameTitle:e.title,game:e,onGameDelete:l?R=>{const D=e.id===R?e:null;D&&l(D)}:void 0,onGameUpdate:i?R=>{R.id===e.id&&i(R)}:void 0,collectionId:m,onRemoveFromCollection:v?()=>v(e.id):void 0,showTitle:!0,subtitle:e.year,detail:!0,play:!!(e.executables&&e.executables.length>0),showBorder:w!=="detail",allCollections:f},`${e.id}-${e.cover}`)})}function Kt({games:e,onGameClick:s,onPlay:n,onGameUpdate:o,onGameDelete:l,buildCoverUrl:i,coverSize:a=150,itemRefs:g,draggable:c=!1,onDragEnd:d,style:u,viewMode:y,allCollections:b=[],collectionId:x,onRemoveFromCollection:p,scrollContainerRef:S}){const{t:w}=F(),f=ze(),[m,v]=r.useState(null),[E,h]=r.useState(null),j=R=>{v(R)},L=R=>{m===null||m===R||h(R)},O=()=>{m!==null&&E!==null&&m!==E&&d&&d(m,E),v(null),h(null)},C=R=>{o&&o(R),f.closeEditModal()},N=e.length>_t&&!c,T=r.useRef(null);return e.length===0?t.jsx("div",{className:"centered-content h-full min-h-[400px]",children:t.jsx("div",{className:"text-gray-400 text-center",children:w("table.noGames")})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{ref:T,className:"games-list-container",style:{gridTemplateColumns:N?void 0:`repeat(auto-fill, ${a}px)`,height:N?"100%":void 0,...u},children:N?t.jsx(Ut,{games:e,coverSize:a,containerRef:S||T,itemRefs:g,onGameClick:s,onPlay:n,onEditClick:f.openEditModal,onGameDelete:l,onGameUpdate:o,buildCoverUrl:i,allCollections:b,collectionId:x,onRemoveFromCollection:p}):e.map((R,D)=>t.jsx(it,{game:R,onGameClick:s,onPlay:n,onEditClick:f.openEditModal,onGameDelete:l,onGameUpdate:o,buildCoverUrl:i,coverSize:a,itemRefs:g,draggable:c,index:D,onDragStart:j,onDragOver:L,onDragEnd:O,isDragging:m!==null,dragOverIndex:E,viewMode:y,allCollections:b,collectionId:x,onRemoveFromCollection:p},R.id))}),f.selectedGame&&de&&t.jsx(Ee,{isOpen:f.isEditModalOpen,onClose:f.closeEditModal,game:f.selectedGame,onGameUpdate:C})]})}function Jt(e){try{const s=sessionStorage.getItem(e);return s?parseFloat(s):null}catch{return null}}function Ue(e,s){try{sessionStorage.setItem(e,s.toString())}catch{}}const Zt=144,Xt=3;function qt({games:e,containerRef:s,itemRefs:n,onGameClick:o,onPlay:l,onEditClick:i,onGameDelete:a,onGameUpdate:g,buildCoverUrl:c,allCollections:d=[]}){const u=Ae(),[y,b]=r.useState({width:0,height:0}),x=r.useRef(null),p=r.useRef(!1),S=`${u.pathname}:detail`;r.useEffect(()=>{s&&"current"in s&&s.current&&(s.current.__virtualizedListRef=x)},[s]),r.useEffect(()=>{const f=()=>{if(s.current){const v=s.current.getBoundingClientRect();b({width:v.width-40,height:v.height||window.innerHeight-200})}};f(),window.addEventListener("resize",f);const m=new ResizeObserver(f);return s.current&&m.observe(s.current),()=>{window.removeEventListener("resize",f),m.disconnect()}},[s]),r.useEffect(()=>{if(y.height===0||e.length===0)return;const f=Jt(S);if(f===null||f<0)return;p.current=!0;const m=(E=0)=>{const h=x.current;if(!h){E<50?setTimeout(()=>m(E+1),50):p.current=!1;return}let j=null;if(h.element)j=h.element;else if(s.current){const L=s.current.querySelector('[style*="overflow"]');L&&L.scrollHeight>L.clientHeight&&(j=L)}if(!j){E<50?setTimeout(()=>m(E+1),50):p.current=!1;return}try{j.scrollTop=f,setTimeout(()=>{const L=j.scrollTop;Math.abs(L-f)>10&&E<5&&(j.scrollTop=f),setTimeout(()=>{p.current=!1},200)},100)}catch{E<10?setTimeout(()=>m(E+1),100):p.current=!1}},v=setTimeout(()=>{m()},300);return()=>{clearTimeout(v),p.current=!1}},[u.pathname,S,y.height,e.length]),r.useEffect(()=>{let f=null,m=null;const v=(E=0)=>{const h=x.current;if(!h){E<20&&setTimeout(()=>v(E+1),100);return}let j=null;if(h.element)j=h.element;else if(s.current){const O=s.current.querySelector('[style*="overflow"]');O&&O.scrollHeight>O.clientHeight&&(j=O)}if(!j){E<20&&setTimeout(()=>v(E+1),100);return}const L=()=>{p.current||(f&&clearTimeout(f),f=setTimeout(()=>{const O=j.scrollTop;Ue(S,O)},150))};j.addEventListener("scroll",L,{passive:!0}),m=()=>{if(f&&clearTimeout(f),j.removeEventListener("scroll",L),!p.current&&j){const O=j.scrollTop;Ue(S,O)}}};return v(),()=>{m&&m()}},[x.current,S,e.length]);const w=({index:f,style:m})=>{const v=e[f];return t.jsx("div",{style:m,children:t.jsx(ot,{game:v,onGameClick:o,onPlay:l,onEditClick:i,onGameDelete:a,onGameUpdate:g,buildCoverUrl:c,itemRefs:n,index:f,allCollections:d})})};return y.width===0||y.height===0?t.jsx("div",{style:{width:"100%",height:"100%"}}):t.jsx(lt,{listRef:x,className:"virtualized-games-list-detail",defaultHeight:y.height,rowCount:e.length,rowHeight:Zt,overscanCount:Xt,rowComponent:w,rowProps:{},style:{height:y.height,width:y.width},onResize:f=>{b({width:f.width,height:f.height})}})}const Ft=100,_e=100;function ot({game:e,onGameClick:s,onPlay:n,onEditClick:o,onGameDelete:l,onGameUpdate:i,buildCoverUrl:a,itemRefs:g,index:c,allCollections:d=[]}){const{t:u,i18n:y}=F(),b=c%2===0,x=_e*1.5,p=r.useRef(e.cover),S=p.current!==e.cover;S&&(p.current=e.cover);const w=r.useMemo(()=>a(te,e.cover,S),[e.cover,S,a]),f=m=>{m.stopPropagation(),o(e)};return t.jsxs("div",{ref:m=>{m&&g?.current&&g.current.set(e.id,m)},className:`group cursor-pointer mb-6 games-list-detail-item ${b?"even":"odd"}`,onClick:()=>s(e),children:[t.jsx(Se,{title:e.title,coverUrl:w,width:_e,height:x,onPlay:n?()=>n(e):void 0,showTitle:!1,detail:!1,play:!!(e.executables&&e.executables.length>0),showBorder:!1},`${e.id}-${e.cover}`),t.jsxs("div",{className:"games-list-detail-content",children:[t.jsx("div",{className:"text-white mb-2 games-list-detail-title",children:e.title}),e.year!==null&&e.year!==void 0||e.stars!==null&&e.stars!==void 0?t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[e.year!==null&&e.year!==void 0&&t.jsx("div",{className:"text-gray-500",style:{fontSize:"0.85rem"},children:Ce(e,u,y)||e.year.toString()}),e.stars!==null&&e.stars!==void 0&&t.jsx(Fe,{rating:e.stars/10*5,starSize:14,gap:3})]}):null,e.summary&&t.jsx(mt,{summary:e.summary,truncateOnly:!0,maxLines:2,fontSize:"0.85rem"})]}),t.jsxs("div",{className:"games-list-detail-actions",children:[t.jsx("button",{onClick:f,className:"games-list-detail-edit-button","aria-label":"Edit",children:t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),t.jsx(Ze,{game:e,allCollections:d}),e.executables&&e.executables.length>1&&n&&t.jsx(Xe,{gameId:e.id,gameExecutables:e.executables,onPlayExecutable:m=>{n&&n(e,m)}}),t.jsx(De,{gameId:e.id,gameTitle:e.title,gameExecutables:e.executables,onAddToCollection:()=>{},onGameDelete:l?m=>{e.id===m&&l(e)}:void 0,onGameUpdate:i?m=>{m.id===e.id&&i(m)}:void 0,className:"games-list-detail-dropdown-menu"})]})]})}function Yt({games:e,onGameClick:s,onPlay:n,onGameUpdate:o,onGameDelete:l,buildCoverUrl:i,itemRefs:a,allCollections:g=[],scrollContainerRef:c}){const{t:d}=F(),u=ze();if(e.length===0)return t.jsx("div",{className:"centered-content h-full min-h-[400px]",children:t.jsx("div",{className:"text-gray-400 text-center",children:d("table.noGames")})});const y=p=>{o&&o(p),u.closeEditModal()},b=e.length>Ft,x=r.useRef(null);return t.jsxs(t.Fragment,{children:[t.jsx("div",{ref:x,className:"games-list-detail-container",style:{height:b?"100%":void 0},children:b?t.jsx(qt,{games:e,containerRef:c||x,itemRefs:a,onGameClick:s,onPlay:n,onEditClick:u.openEditModal,onGameDelete:l,onGameUpdate:o,buildCoverUrl:i,allCollections:g}):e.map((p,S)=>t.jsx(ot,{game:p,onGameClick:s,onPlay:n,onEditClick:u.openEditModal,onGameDelete:l,onGameUpdate:o,buildCoverUrl:i,itemRefs:a,index:S,allCollections:g},p.id))}),u.selectedGame&&t.jsx(Ee,{isOpen:u.isEditModalOpen,onClose:u.closeEditModal,game:u.selectedGame,onGameUpdate:y})]})}function at({game:e,index:s,itemRefs:n,onGameClick:o,onPlay:l,onGameUpdate:i,onGameDelete:a,allCollections:g=[],columnVisibility:c,handleRatingChange:d,formatRating:u,formatGameDate:y,t:b,i18n:x,editGame:p}){const w=s%2===0?"even-row":"odd-row",f=c.title?"title":c.releaseDate?"releaseDate":c.stars?"stars":c.year?"year":c.criticRating?"criticRating":c.ageRating?"ageRating":null,m=()=>{if(!e.executables||e.executables.length===0)return null;const v=E=>{E.stopPropagation(),l&&l(e)};return t.jsx("button",{className:"first-cell-play-button","aria-label":"Play game",onClick:v,children:t.jsx("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M8 5v14l11-7z",fill:"currentColor"})})})};return t.jsxs("tr",{ref:v=>{v&&n?.current&&n.current.set(e.id,v)},children:[t.jsx("td",{className:"column-menu-cell"}),c.title&&t.jsxs("td",{className:`title-cell ${w} ${f==="title"?"first-visible-cell":""}`,children:[f==="title"&&l&&t.jsx(m,{}),t.jsx(Te,{text:e.title,delay:1e3,children:t.jsx("span",{className:f==="title"?"first-cell-text":"title-cell-text",onClick:()=>o(e),children:e.title})})]}),c.releaseDate&&t.jsxs("td",{className:`date-cell ${w} ${c.stars||c.year||c.criticRating?"has-border-right":""} ${f==="releaseDate"?"first-visible-cell":""}`,children:[f==="releaseDate"&&l&&t.jsx(m,{}),t.jsx("span",{className:f==="releaseDate"?"first-cell-text":"",children:y(e,b,x)||"-"})]}),c.stars&&t.jsxs("td",{className:`stars-cell ${w} ${f==="stars"?"first-visible-cell":""}`,children:[f==="stars"&&l&&t.jsx(m,{}),t.jsx("div",{className:f==="stars"?"first-cell-text":"",style:{display:"flex",alignItems:"center"},children:t.jsx(Fe,{rating:e.stars?e.stars/10*5:0,starSize:14,gap:3,color:"rgba(255, 255, 255, 0.4)",noStroke:!0,readOnly:!de,onRatingChange:de?v=>d(e.id,v):void 0})})]}),c.year&&t.jsxs("td",{className:`year-cell ${w} has-border-right ${f==="year"?"first-visible-cell":""}`,children:[f==="year"&&l&&t.jsx(m,{}),t.jsx("span",{className:f==="year"?"first-cell-text":"",children:e.year||"-"})]}),c.criticRating&&t.jsxs("td",{className:`critic-rating-cell ${w} has-border-right ${f==="criticRating"?"first-visible-cell":""}`,children:[f==="criticRating"&&l&&t.jsx(m,{}),t.jsx("div",{className:f==="criticRating"?"first-cell-text":"",style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:(()=>{const v=u(e.criticratings),E=u(e.userratings);return v===null&&E===null?t.jsx("span",{children:"-"}):t.jsxs(t.Fragment,{children:[v!==null&&t.jsx(Te,{text:b("gameDetail.criticRating"),children:t.jsxs("div",{className:"text-white",style:{opacity:.8,fontFamily:"var(--font-body-2-font-family)",fontSize:"var(--font-body-2-font-size)",lineHeight:"var(--font-body-2-line-height)",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#FFD700",stroke:"#FFA500",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",style:{flexShrink:0},children:t.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})}),v]})}),E!==null&&t.jsx(Te,{text:b("gameDetail.userRating"),children:t.jsxs("div",{className:"text-white",style:{opacity:.8,fontFamily:"var(--font-body-2-font-family)",fontSize:"var(--font-body-2-font-size)",lineHeight:"var(--font-body-2-line-height)",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#4CAF50",stroke:"#2E7D32",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",style:{flexShrink:0},children:[t.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"9",cy:"7",r:"4"}),t.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),t.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),E]})})]})})()})]}),c.ageRating&&t.jsxs("td",{className:`age-rating-cell ${w} has-border-right ${f==="ageRating"?"first-visible-cell":""}`,children:[f==="ageRating"&&l&&t.jsx(m,{}),t.jsx("div",{className:f==="ageRating"?"first-cell-text":"",children:e.ageRatings&&e.ageRatings.length>0?t.jsx(bt,{ageRatings:e.ageRatings}):t.jsx("span",{children:"-"})})]}),t.jsx("td",{className:`games-table-edit-cell ${w}`,children:t.jsxs("div",{className:"games-table-actions",children:[t.jsx("button",{onClick:v=>{v.stopPropagation(),p.openEditModal(e)},className:"games-table-edit-button","aria-label":"Edit",children:t.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),t.jsx(Ze,{game:e,allCollections:g}),e.executables&&e.executables.length>1&&l&&t.jsx(Xe,{gameId:e.id,gameExecutables:e.executables,onPlayExecutable:v=>{l&&l(e,v)}}),t.jsx(De,{gameId:e.id,gameTitle:e.title,gameExecutables:e.executables,onAddToCollection:()=>{},onGameDelete:a?v=>{const E=e.id===v?e:null;E&&a(E)}:void 0,onGameUpdate:i?v=>{v.id===e.id&&i(v)}:void 0,className:"games-table-dropdown-menu"})]})})]},e.id)}function Qt(e){try{const s=sessionStorage.getItem(e);return s?parseFloat(s):null}catch{return null}}function es(e,s){try{sessionStorage.setItem(e,s.toString())}catch{}}const ts=56,ss=5;function ns({games:e,containerRef:s,itemRefs:n,onGameClick:o,onPlay:l,onGameUpdate:i,onGameDelete:a,allCollections:g=[],columnVisibility:c,handleRatingChange:d,formatRating:u,formatGameDate:y,t:b,i18n:x,editGame:p}){const S=Ae(),[w,f]=r.useState({width:0,height:0}),m=r.useRef(null),v=r.useRef(!1),E=r.useRef(null),h=`${S.pathname}:table`,[j,L]=r.useState(!1);r.useEffect(()=>{s&&"current"in s&&s.current&&(s.current.__virtualizedListRef=m)},[s]),r.useEffect(()=>{const C=()=>{if(s.current){const T=s.current.getBoundingClientRect();f({width:T.width-40,height:T.height||window.innerHeight-200})}};C(),window.addEventListener("resize",C);const N=new ResizeObserver(C);return s.current&&N.observe(s.current),()=>{window.removeEventListener("resize",C),N.disconnect()}},[s]),r.useEffect(()=>{if(w.height===0||e.length===0)return;const C=Qt(h);if(C===null||C<0){L(!0);return}v.current=!0;const N=(T=0)=>{const R=m.current;if(!R){T<50?setTimeout(()=>N(T+1),50):(v.current=!1,L(!0));return}let D=null;if(R.element)D=R.element;else if(s.current){const A=s.current.querySelector('[style*="overflow"]');A&&A.scrollHeight>A.clientHeight&&(D=A)}if(!D){T<20?setTimeout(()=>N(T+1),50):(v.current=!1,L(!0));return}D.scrollTop=C,setTimeout(()=>{v.current=!1,L(!0)},50)};N()},[w.height,e.length,h,s]),r.useEffect(()=>{if(v.current||w.height===0)return;const C=m.current;if(!C)return;let N=null;if(C.element?N=C.element:s.current&&(N=s.current.querySelector('[style*="overflow"]')),!N)return;const T=()=>{if(v.current)return;const D=N?.scrollTop||0;E.current!==null&&Math.abs(E.current-D)<10||(E.current=D,es(h,D))};let R;return N.addEventListener("scroll",()=>{clearTimeout(R),R=window.setTimeout(T,100)},{passive:!0}),()=>{clearTimeout(R),N?.removeEventListener("scroll",T)}},[w.height,h,s]);const O=({index:C,style:N})=>{const T=e[C];return T?t.jsx("div",{style:N,className:"virtualized-table-row-wrapper",children:t.jsx(at,{game:T,index:C,itemRefs:n,onGameClick:o,onPlay:l,onGameUpdate:i,onGameDelete:a,allCollections:g,columnVisibility:c,handleRatingChange:d,formatRating:u,formatGameDate:y,t:b,i18n:x,editGame:p})}):null};return w.height===0||e.length===0?t.jsx("div",{style:{width:"100%",height:"100%"}}):t.jsx("div",{style:{opacity:j?1:0,transition:j?"opacity 0.1s":"none"},children:t.jsx("div",{className:"virtualized-games-table-wrapper",children:t.jsx("table",{className:"games-table",children:t.jsx("tbody",{className:"virtualized-games-table-tbody",children:t.jsx(lt,{listRef:m,className:"virtualized-games-table-list",defaultHeight:w.height,rowCount:e.length,rowHeight:ts,overscanCount:ss,rowComponent:O,rowProps:{},style:{height:w.height,width:w.width},onResize:C=>{f({width:C.width,height:C.height})}})})})})})}const rs=100;function ls({games:e,onGameClick:s,onPlay:n,onGameUpdate:o,onGameDelete:l,itemRefs:i,scrollContainerRef:a,allCollections:g=[],columnVisibility:c}){const d=r.useRef(null),u=a||d;Je(u,"table");const[y,b]=r.useState(e),x=ze();r.useEffect(()=>{b(e)},[e]);const p=async(h,j)=>{if(de)try{const L=le(te,`/games/${h}`);if((await fetch(L,{method:"PUT",headers:{"Content-Type":"application/json","X-Auth-Token":de},body:JSON.stringify({stars:j})})).ok){const C=y.map(N=>N.id===h?{...N,stars:j}:N);b(C)}else console.error("Failed to update rating")}catch(L){console.error("Error updating rating:",L)}},S=h=>{const j=y.map(L=>L.id===h.id?h:L);b(j),o&&o(h),x.closeEditModal()},{t:w,i18n:f}=F();if(e.length===0)return t.jsx("div",{className:"centered-content h-full min-h-[400px]",children:t.jsx("div",{className:"text-gray-400 text-center",children:w("table.noGames")})});const m=h=>{if(h==null||isNaN(h))return null;const j=Number(h);return j<0||j>10?null:j%1===0?j.toString():j.toFixed(1)},v=y.length>rs,E=r.useRef(null);return v?t.jsxs("div",{className:"games-table-container",children:[t.jsx("div",{className:"games-table-scroll virtualized-table-scroll",ref:E,children:t.jsx(ns,{games:y,containerRef:E,itemRefs:i,onGameClick:s,onPlay:n,onGameUpdate:o,onGameDelete:l,allCollections:g,columnVisibility:c,handleRatingChange:p,formatRating:m,formatGameDate:Ce,t:w,i18n:f,editGame:x})}),x.selectedGame&&t.jsx(Ee,{isOpen:x.isEditModalOpen,onClose:x.closeEditModal,game:x.selectedGame,onGameUpdate:S})]}):t.jsxs("div",{className:"games-table-container",children:[t.jsx("div",{className:"games-table-scroll",ref:u,children:t.jsx("table",{className:"games-table",children:t.jsx("tbody",{children:y.map((h,j)=>t.jsx(at,{game:h,index:j,itemRefs:i,onGameClick:s,onPlay:n,onGameUpdate:o,onGameDelete:l,allCollections:g,columnVisibility:c,handleRatingChange:p,formatRating:m,formatGameDate:Ce,t:w,i18n:f,editGame:x},h.id))})})}),x.selectedGame&&t.jsx(Ee,{isOpen:x.isEditModalOpen,onClose:x.closeEditModal,game:x.selectedGame,onGameUpdate:S})]})}function is({columnVisibility:e,onToggleColumn:s,sortField:n,sortAscending:o=!0,onSort:l}){const{t:i,i18n:a}=F(),[g,c]=r.useState(!1),d=r.useRef(null);r.useEffect(()=>{function x(p){d.current&&!d.current.contains(p.target)&&c(!1)}return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[]);const u=x=>n!==x?"":o?"↑":"↓",y=r.useMemo(()=>[{key:"title",label:i("table.title")},{key:"releaseDate",label:i("table.releaseDate")},{key:"year",label:i("table.year")},{key:"stars",label:i("table.stars")},{key:"criticRating",label:i("table.criticRating")},{key:"ageRating",label:i("table.ageRating")}],[i,a.language]),b=e.title?"title":e.releaseDate?"releaseDate":e.stars?"stars":e.year?"year":e.criticRating?"criticRating":e.ageRating?"ageRating":null;return t.jsx("div",{className:"games-table-header-section",children:t.jsx("table",{className:"games-table-header-table",children:t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"games-table-header-table th column-menu",children:t.jsxs("div",{className:"games-table-column-menu-wrapper",ref:d,children:[t.jsxs("button",{onClick:()=>c(!g),className:"games-table-column-menu-button",children:[t.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),t.jsx("svg",{width:"12",height:"12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:1.5,className:`games-table-column-menu-arrow ${g?"open":""}`,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})]}),g&&t.jsx("div",{className:"games-table-column-menu-popup",children:y.map(x=>t.jsxs("button",{className:`games-table-column-menu-item ${e[x.key]?"selected":""}`,onClick:()=>s(x.key),children:[t.jsx("span",{children:x.label}),e[x.key]&&t.jsx("svg",{className:"games-table-column-menu-check",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#E5A00D"})})]},x.key))})]})}),e.title&&t.jsxs("th",{onClick:()=>l("title"),className:`title-cell has-border-right ${b==="title"?"first-visible-cell":""} ${n==="title"?"sorted":""}`,children:[t.jsx("span",{children:i("table.title")}),t.jsx("span",{className:"sort-indicator",children:u("title")})]}),e.releaseDate&&t.jsxs("th",{onClick:()=>l("releaseDate"),className:`date-cell has-border-right ${b==="releaseDate"?"first-visible-cell":""} ${n==="releaseDate"?"sorted":""}`,children:[t.jsx("span",{children:i("table.releaseDate")}),t.jsx("span",{className:"sort-indicator",children:u("releaseDate")})]}),e.stars&&t.jsxs("th",{onClick:()=>l("stars"),className:`stars-cell has-border-right ${b==="stars"?"first-visible-cell":""} ${n==="stars"?"sorted":""}`,children:[t.jsx("span",{children:i("table.stars")}),t.jsx("span",{className:"sort-indicator",children:u("stars")})]}),e.year&&t.jsxs("th",{onClick:()=>l("year"),className:`year-cell has-border-right ${b==="year"?"first-visible-cell":""} ${n==="year"?"sorted":""}`,children:[t.jsx("span",{children:i("table.year")}),t.jsx("span",{className:"sort-indicator",children:u("year")})]}),e.criticRating&&t.jsxs("th",{onClick:()=>l("criticRating"),className:`critic-rating-cell has-border-right ${b==="criticRating"?"first-visible-cell":""} ${n==="criticRating"?"sorted":""}`,children:[t.jsx("span",{children:i("table.criticRating")}),t.jsx("span",{className:"sort-indicator",children:u("criticRating")})]}),e.ageRating&&t.jsxs("th",{onClick:()=>l("ageRating"),className:`age-rating-cell has-border-right ${b==="ageRating"?"first-visible-cell":""} ${n==="ageRating"?"sorted":""}`,children:[t.jsx("span",{children:i("table.ageRating")}),t.jsx("span",{className:"sort-indicator",children:u("ageRating")})]}),t.jsx("th",{className:"games-table-edit-header"})]})})})})}function we({isOpen:e,onClose:s,onCloseCompletely:n,selectedValue:o,onSelect:l,games:i=[],config:a,additionalData:g}){const{t:c}=F(),[d,u]=r.useState(""),y=r.useRef(null),b=r.useMemo(()=>a.getAvailableValues(i,g),[i,a,g]),x=r.useMemo(()=>{if(!d)return b;const w=d.toLowerCase();return b.filter(f=>f.label.toLowerCase().includes(w)||f.value?.toString().toLowerCase().includes(w))},[b,d]);r.useEffect(()=>{if(!e)return;function w(f){y.current&&!y.current.contains(f.target)&&n()}return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[e,n]),r.useEffect(()=>{if(!e)return;function w(f){f.key==="Escape"&&n()}return document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w)}},[e,n]),r.useEffect(()=>{e&&u("")},[e]);const p=()=>{s()},S=w=>{l(w)};return e?t.jsxs("div",{className:"filter-popup",ref:y,children:[t.jsxs("div",{className:"filter-popup-header",children:[t.jsx("button",{className:"filter-popup-back",onClick:p,children:t.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M15 18l-6-6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),t.jsx("span",{className:"filter-popup-header-title",children:c(a.labelKey)})]}),t.jsx("div",{className:"filter-popup-search",children:t.jsx("input",{id:`filter-search-${a.type}`,name:"filterSearch",type:"text",className:"filter-popup-search-input",placeholder:c(a.searchPlaceholderKey),value:d,onChange:w=>u(w.target.value),onClick:w=>w.stopPropagation()})}),t.jsx("div",{className:`filter-popup-content ${a.isScrollable?"filter-popup-scrollable":""}`,children:x.map(w=>t.jsx("button",{className:`filter-popup-item ${o===w.value?"active":""}`,onClick:()=>S(w.value),children:w.label},w.value?.toString()||"null"))})]}):null}const os={type:"year",labelKey:"gamesListToolbar.filter.year",searchPlaceholderKey:"gamesListToolbar.filter.searchYear",getAvailableValues:e=>{const s=new Set;return e.forEach(n=>{n.year!==null&&n.year!==void 0&&s.add(n.year)}),Array.from(s).sort((n,o)=>o-n).map(n=>({value:n,label:n.toString()}))},formatValue:e=>typeof e=="number"?e.toString():"",isScrollable:!1};function as(e){return t.jsx(we,{...e,config:os})}function cs({availableGenres:e=[],...s}){const{t:n}=F(),o=r.useMemo(()=>({type:"genre",labelKey:"gamesListToolbar.filter.genre",searchPlaceholderKey:"gamesListToolbar.filter.searchGenre",getAvailableValues:(i,a)=>(a?.availableGenres||e).map(c=>({value:c.title,label:n(`genre.${c.title}`,c.title)})),formatValue:i=>{if(typeof i!="string")return"";const a=e.find(g=>g.title===i);return a?n(`genre.${a.title}`,a.title):""},isScrollable:!0}),[e,n]),l=r.useMemo(()=>({availableGenres:e}),[e]);return t.jsx(we,{...s,config:o,additionalData:l})}const ds={type:"decade",labelKey:"gamesListToolbar.filter.decade",searchPlaceholderKey:"gamesListToolbar.filter.searchDecade",getAvailableValues:e=>{const s=new Set;return e.forEach(n=>{if(n.year!==null&&n.year!==void 0){const o=Math.floor(n.year/10)*10;s.add(o)}}),Array.from(s).sort((n,o)=>o-n).map(n=>({value:n,label:`${n}s`}))},formatValue:e=>typeof e=="number"?`${e}s`:"",isScrollable:!1};function us(e){return t.jsx(we,{...e,config:ds})}function fs({availableCollections:e=[],...s}){const n=r.useMemo(()=>({type:"collection",labelKey:"gamesListToolbar.filter.collection",searchPlaceholderKey:"gamesListToolbar.filter.searchCollection",getAvailableValues:(l,i)=>(i?.availableCollections||e).map(g=>({value:g.id,label:g.title})),formatValue:l=>{if(l==null)return"";const i=e.find(a=>String(a.id)===String(l));return i?i.title:""},isScrollable:!0}),[e]),o=r.useMemo(()=>({availableCollections:e}),[e]);return t.jsx(we,{...s,config:n,additionalData:o})}function gs({games:e=[],...s}){const{t:n,i18n:o}=F(),l={type:"ageRating",labelKey:"gamesListToolbar.filter.ageRating",searchPlaceholderKey:"gamesListToolbar.filter.searchAgeRating",getAvailableValues:i=>{const a=new Map;return i.forEach(g=>{g.ageRatings&&g.ageRatings.length>0&&Ye(g.ageRatings,o.language).forEach(d=>{const u=`${d.category}-${d.rating}`;a.has(u)||a.set(u,{category:d.category,rating:d.rating})})}),Array.from(a.values()).map(g=>{const c=ke(g.category,g.rating,n);return{value:`${g.category}-${g.rating}`,label:c}}).sort((g,c)=>{const[d,u]=g.value.split("-").map(Number),[y,b]=c.value.split("-").map(Number);return d!==y?d-y:u-b})},formatValue:i=>{if(typeof i=="string"&&i.includes("-")){const[a,g]=i.split("-").map(Number);return ke(a,g,n)}return""},isScrollable:!0};return t.jsx(we,{...s,config:l,games:e})}function xe({type:e,isOpen:s,onClose:n,onCloseCompletely:o,selectedValue:l,onSelect:i,games:a=[],availableGenres:g=[],availableCollections:c=[]}){const d={isOpen:s,onClose:n,onCloseCompletely:o,selectedValue:l,onSelect:i,games:a};switch(e){case"year":return t.jsx(as,{...d});case"genre":return t.jsx(cs,{...d,availableGenres:g});case"decade":return t.jsx(us,{...d});case"collection":return t.jsx(fs,{...d,availableCollections:c});case"ageRating":return t.jsx(gs,{...d});default:return null}}function hs({isOpen:e,onClose:s,currentFilter:n,selectedYear:o,selectedGenre:l,selectedDecade:i,selectedCollection:a,selectedAgeRating:g,onFilterChange:c,onYearFilterChange:d,onGenreFilterChange:u,onDecadeFilterChange:y,onCollectionFilterChange:b,onAgeRatingFilterChange:x,games:p=[],availableGenres:S=[],availableCollections:w=[]}){const{t:f}=F(),[m,v]=r.useState(null),E=r.useRef(null),h=r.useRef(null),j=r.useRef(!1),L=r.useRef(!0);r.useEffect(()=>{e&&(L.current?(v(null),L.current=!1,n==="year"?h.current="year":n==="genre"?h.current="genre":n==="decade"?h.current="decade":h.current=null,j.current=!1):j.current?(v(null),n==="year"?h.current="year":n==="genre"?h.current="genre":n==="decade"?h.current="decade":n==="collection"?h.current="collection":n==="ageRating"&&(h.current="ageRating")):n==="year"?(v("year"),h.current="year"):n==="genre"?(v("genre"),h.current="genre"):n==="decade"?(v("decade"),h.current="decade"):n==="collection"?(v("collection"),h.current="collection"):n==="ageRating"?(v("ageRating"),h.current="ageRating"):h.current?v(h.current):v(null))},[e,n]),r.useEffect(()=>{if(!e&&!m)return;function I(M){const W=M.target;let K=!1;e&&E.current&&(K=!E.current.contains(W)),K&&!m&&s()}return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[e,m,s]),r.useEffect(()=>{if(!e&&!m)return;function I(M){M.key==="Escape"&&(m?(v(null),j.current=!0):s())}return document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}},[e,m,s]);const O=I=>{I==="year"?(v("year"),h.current="year",j.current=!1):I==="genre"?(v("genre"),h.current="genre",j.current=!1):I==="decade"?(v("decade"),h.current="decade",j.current=!1):I==="collection"?(v("collection"),h.current="collection",j.current=!1):I==="ageRating"?(v("ageRating"),h.current="ageRating",j.current=!1):(c?.(I),d&&d(null),u&&u(null),y&&y(null),b&&b(null),x&&x(null),v(null),h.current=null,s())},C=I=>{const M=typeof I=="number"?I:null;M===null?(c?.("all"),d?.(null),v(null),h.current=null,s()):(c?.("year"),d?.(M),h.current="year",s())},N=I=>{const M=typeof I=="string"?I:null;M===null?(c?.("all"),u?.(null),v(null),h.current=null,s()):(c?.("genre"),u?.(M),d&&d(null),y&&y(null),b&&b(null),x&&x(null),h.current="genre",s())},T=I=>{const M=typeof I=="number"?I:null;M===null?(c?.("all"),y?.(null),v(null),h.current=null,s()):(c?.("decade"),y?.(M),d&&d(null),u&&u(null),b&&b(null),x&&x(null),h.current="decade",s())},R=I=>{if(I===null)c?.("all"),b?.(null),v(null),h.current=null,s();else{const M=typeof I=="string"?I:String(I);c?.("collection"),b?.(M),d&&d(null),u&&u(null),y&&y(null),x&&x(null),h.current="collection",s()}},D=I=>{const M=typeof I=="string"?I:null;M===null?(c?.("all"),x?.(null),v(null),h.current=null,s()):(c?.("ageRating"),x?.(M),d&&d(null),u&&u(null),y&&y(null),b&&b(null),h.current="ageRating",s())},A=()=>{v(null),h.current=null,j.current=!0},G=()=>{v(null),s()};return e&&m==="year"?t.jsx(xe,{type:"year",isOpen:!0,onClose:A,onCloseCompletely:G,selectedValue:o,onSelect:C,games:p}):e&&m==="genre"?t.jsx(xe,{type:"genre",isOpen:!0,onClose:A,onCloseCompletely:G,selectedValue:l,onSelect:N,games:p,availableGenres:S}):e&&m==="decade"?t.jsx(xe,{type:"decade",isOpen:!0,onClose:A,onCloseCompletely:G,selectedValue:i,onSelect:T,games:p}):e&&m==="collection"?t.jsx(xe,{type:"collection",isOpen:!0,onClose:A,onCloseCompletely:G,selectedValue:a,onSelect:R,games:p,availableCollections:w}):e&&m==="ageRating"?t.jsx(xe,{type:"ageRating",isOpen:!0,onClose:A,onCloseCompletely:G,selectedValue:g,onSelect:D,games:p}):!e||m?null:t.jsxs("div",{className:"filter-popup",ref:E,children:[t.jsxs("button",{className:`filter-popup-item ${n==="all"?"selected":""}`,onClick:()=>O("all"),children:[t.jsx("span",{children:f("gamesListToolbar.filter.all")}),n==="all"&&t.jsx("svg",{className:"filter-popup-check",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#E5A00D"})})]}),t.jsx("div",{className:"filter-popup-divider"}),t.jsxs("button",{className:`filter-popup-item ${n==="genre"?"selected":""}`,onClick:()=>O("genre"),children:[t.jsx("span",{children:f("gamesListToolbar.filter.genre")}),n==="genre"&&t.jsx("svg",{className:"filter-popup-check",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#E5A00D"})})]}),t.jsxs("button",{className:`filter-popup-item ${n==="year"?"selected":""}`,onClick:()=>O("year"),children:[t.jsx("span",{children:f("gamesListToolbar.filter.year")}),n==="year"&&t.jsx("svg",{className:"filter-popup-check",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#E5A00D"})})]}),t.jsxs("button",{className:`filter-popup-item ${n==="decade"?"selected":""}`,onClick:()=>O("decade"),children:[t.jsx("span",{children:f("gamesListToolbar.filter.decade")}),n==="decade"&&t.jsx("svg",{className:"filter-popup-check",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#E5A00D"})})]}),t.jsxs("button",{className:`filter-popup-item ${n==="ageRating"?"selected":""}`,onClick:()=>O("ageRating"),children:[t.jsx("span",{children:f("gamesListToolbar.filter.ageRating")}),n==="ageRating"&&t.jsx("svg",{className:"filter-popup-check",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#E5A00D"})})]}),t.jsxs("button",{className:`filter-popup-item ${n==="collection"?"selected":""}`,onClick:()=>O("collection"),children:[t.jsx("span",{children:f("gamesListToolbar.filter.collection")}),n==="collection"&&t.jsx("svg",{className:"filter-popup-check",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",fill:"#E5A00D"})})]})]})}function ms({isOpen:e,onClose:s,currentSort:n,sortAscending:o,onSortChange:l,onSortDirectionChange:i}){const{t:a}=F(),g=r.useRef(null);r.useEffect(()=>{if(!e)return;function u(y){g.current&&!g.current.contains(y.target)&&s()}return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[e,s]),r.useEffect(()=>{if(!e)return;function u(y){y.key==="Escape"&&s()}return document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}},[e,s]);const c=[{value:"title",label:a("gamesListToolbar.sort.title")},{value:"year",label:a("gamesListToolbar.sort.year")},{value:"releaseDate",label:a("gamesListToolbar.sort.releaseDate")},{value:"criticRating",label:a("gamesListToolbar.sort.criticRating")},{value:"userRating",label:a("gamesListToolbar.sort.userRating")},{value:"stars",label:a("gamesListToolbar.sort.stars")},{value:"ageRating",label:a("gamesListToolbar.sort.ageRating")}],d=u=>{u===n&&i?i(!o):(l?.(u),i&&i(!0)),s()};return e?t.jsx("div",{className:"sort-popup",ref:g,children:c.map(u=>t.jsxs("button",{className:`sort-popup-item ${n===u.value?"selected":""}`,onClick:()=>d(u.value),children:[t.jsx("span",{children:u.label}),n===u.value&&t.jsx("svg",{className:`sort-popup-sort-direction ${o?"ascending":"descending"}`,width:"10",height:"10",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:o?"M6 2L10 8H2L6 2Z":"M6 10L2 4H10L6 10Z",fill:"currentColor"})})]},u.value))}):null}function vs({gamesCount:e,games:s=[],onFilterChange:n,onYearFilterChange:o,onGenreFilterChange:l,onDecadeFilterChange:i,onCollectionFilterChange:a,onAgeRatingFilterChange:g,onSortChange:c,onSortDirectionChange:d,currentFilter:u="all",selectedYear:y=null,selectedGenre:b=null,selectedDecade:x=null,selectedCollection:p=null,selectedAgeRating:S=null,currentSort:w="title",sortAscending:f=!0,viewMode:m="grid",availableGenres:v=[],availableCollections:E=[]}){const{t:h}=F(),[j,L]=r.useState(!1),[O,C]=r.useState(!1),N=r.useRef(null),T=r.useRef(null),D=(()=>{if(u==="year"&&y!==null)return y.toString();if(u==="decade"&&x!==null)return`${x}s`;if(u==="collection"&&p!==null){const M=E?.find(W=>String(W.id)===String(p));return M?M.title:String(p)}if(u==="genre"&&b!==null){const M=v.find(W=>W.title===b);return M?h(`genre.${M.title}`,M.title):b}if(u==="ageRating"&&S!==null){const[M,W]=S.split("-").map(Number);return ke(M,W,h)||S}return[{value:"all",label:h("gamesListToolbar.filter.all")},{value:"genre",label:h("gamesListToolbar.filter.genre")},{value:"year",label:h("gamesListToolbar.filter.year")},{value:"decade",label:h("gamesListToolbar.filter.decade")},{value:"collection",label:h("gamesListToolbar.filter.collection")},{value:"ageRating",label:h("gamesListToolbar.filter.ageRating")}].find(M=>M.value===u)?.label||""})(),G=[{value:"title",label:h("gamesListToolbar.sort.title")},{value:"year",label:h("gamesListToolbar.sort.year")},{value:"releaseDate",label:h("gamesListToolbar.sort.releaseDate")},{value:"criticRating",label:h("gamesListToolbar.sort.criticRating")},{value:"userRating",label:h("gamesListToolbar.sort.userRating")},{value:"stars",label:h("gamesListToolbar.sort.stars")},{value:"ageRating",label:h("gamesListToolbar.sort.ageRating")}].find(I=>I.value===w)?.label||"";return t.jsx("div",{className:"games-list-toolbar",children:t.jsxs("div",{className:"games-list-toolbar-left",children:[t.jsxs("div",{className:"games-list-toolbar-item",ref:N,children:[t.jsxs("button",{className:"games-list-toolbar-button",onClick:()=>{L(!j),C(!1)},children:[u&&u!=="all"&&t.jsx("span",{className:"games-list-toolbar-clear-button",onClick:I=>{I.stopPropagation(),n?.("all"),o&&o(null),l&&l(null),i&&i(null),a&&a(null),g&&g(null),L(!1)},role:"button",tabIndex:0,onKeyDown:I=>{(I.key==="Enter"||I.key===" ")&&(I.preventDefault(),I.stopPropagation(),n?.("all"),o&&o(null),l&&l(null),i&&i(null),a&&a(null),g&&g(null),L(!1))},children:t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),t.jsx("span",{className:"games-list-toolbar-value",children:D}),t.jsx("svg",{className:`games-list-toolbar-arrow ${j?"open":""}`,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M6 9L1 4h10L6 9z",fill:"currentColor"})})]}),t.jsx(hs,{isOpen:j,onClose:()=>L(!1),currentFilter:u,selectedYear:y,selectedGenre:b,selectedDecade:x,selectedCollection:p,selectedAgeRating:S,onFilterChange:n,onYearFilterChange:o,onGenreFilterChange:l,onDecadeFilterChange:i,onCollectionFilterChange:a,onAgeRatingFilterChange:g,games:s,availableGenres:v,availableCollections:E})]}),m!=="table"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"games-list-toolbar-item",ref:T,children:[t.jsxs("button",{className:"games-list-toolbar-button",onClick:()=>{C(!O),L(!1)},children:[t.jsxs("span",{className:"games-list-toolbar-value",children:[h("gamesListToolbar.sort.prefix")," ",G]}),t.jsx("svg",{className:`games-list-toolbar-arrow ${O?"open":""}`,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M6 9L1 4h10L6 9z",fill:"currentColor"})})]}),t.jsx(ms,{isOpen:O,onClose:()=>C(!1),currentSort:w,sortAscending:f,onSortChange:c,onSortDirectionChange:d})]}),t.jsx("span",{className:"games-list-toolbar-count",children:e})]}),m==="table"&&t.jsx("span",{className:"games-list-toolbar-count",children:e})]})})}function ps({hook:e,viewMode:s,coverSize:n,isLoading:o,isReady:l,allCollections:i=[],onGameClick:a,onGamesLoaded:g,onPlay:c,buildCoverUrlFn:d}){const{games:u,filterField:y,setFilterField:b,selectedYear:x,setSelectedYear:p,selectedDecade:S,setSelectedDecade:w,selectedCollection:f,setSelectedCollection:m,selectedAgeRating:v,setSelectedAgeRating:E,selectedGenre:h,setSelectedGenre:j,sortField:L,setSortField:O,sortAscending:C,setSortAscending:N,columnVisibility:T,toggleColumn:R,handleTableSort:D,filteredAndSortedGames:A,scrollContainerRef:G,tableScrollRef:I,itemRefs:M,handleGameUpdate:W,handleGameDelete:K,availableGenres:Z,availableCollections:se}=e;r.useEffect(()=>{u.length>0&&g(u)},[u.length]);const J=d||qe;return t.jsxs("div",{className:`home-page-content-wrapper ${!o&&u.length>0?"has-toolbar":""}`,style:{opacity:l?1:0,transition:"opacity 0.2s ease-in-out"},children:[!o&&u.length>0&&t.jsx(vs,{gamesCount:A.length,games:u,onFilterChange:b,onYearFilterChange:p,onGenreFilterChange:j,onDecadeFilterChange:w,onSortChange:O,onSortDirectionChange:N,currentFilter:y,selectedYear:x,selectedGenre:h,selectedDecade:S,selectedCollection:f,onCollectionFilterChange:m,selectedAgeRating:v,onAgeRatingFilterChange:E,currentSort:L,sortAscending:C,viewMode:s,availableGenres:Z,availableCollections:se}),s==="table"&&!o&&u.length>0&&t.jsx(is,{columnVisibility:T,onToggleColumn:R,sortField:L,sortAscending:C,onSort:D}),t.jsx("div",{ref:G,className:`home-page-scroll-container ${s==="table"?"table-view":""} ${!o&&A.length===0?"centered-content min-h-[400px]":""}`,children:!o&&t.jsxs(t.Fragment,{children:[s==="grid"&&t.jsx(Kt,{games:A,onGameClick:a,onPlay:c,onGameUpdate:W,onGameDelete:K,buildCoverUrl:J,coverSize:n,itemRefs:M,viewMode:s,allCollections:i,scrollContainerRef:G}),s==="detail"&&t.jsx(Yt,{games:A,onGameClick:a,onPlay:c,onGameUpdate:W,onGameDelete:K,buildCoverUrl:J,itemRefs:M,allCollections:i,scrollContainerRef:G}),s==="table"&&t.jsx(ls,{games:A,onGameClick:a,onPlay:c,onGameUpdate:W,onGameDelete:K,itemRefs:M,scrollContainerRef:I,allCollections:i,columnVisibility:T})]})})]})}function xs({games:e,scrollContainerRef:s,itemRefs:n,ascending:o=!0,virtualizedGridRef:l,virtualizedListRef:i,viewMode:a,coverSize:g}){const[c,d]=r.useState(!1);r.useEffect(()=>{const p=()=>{const v=s.current;if(!v){d(!1);return}requestAnimationFrame(()=>{if(!v){d(!1);return}const E=v,h=E.__virtualizedGridRef?.current,j=E.__virtualizedListRef?.current;if(l?.current||i?.current||h||j){d(e.length>10);return}const O=v.scrollHeight>v.clientHeight;d(O)})};p();const S=setTimeout(p,100),w=setTimeout(p,300),f=setTimeout(p,500),m=setTimeout(p,1e3);if(window.addEventListener("resize",p),s.current){const v=new ResizeObserver(()=>{setTimeout(p,50)});v.observe(s.current);const E=new MutationObserver(()=>{setTimeout(p,50)});return E.observe(s.current,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),()=>{clearTimeout(S),clearTimeout(w),clearTimeout(f),clearTimeout(m),window.removeEventListener("resize",p),v.disconnect(),E.disconnect()}}return()=>{clearTimeout(S),clearTimeout(w),clearTimeout(f),clearTimeout(m),window.removeEventListener("resize",p)}},[e,s,l,i]);const u=o?["#",..."ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")]:[..."ZYXWVUTSRQPONMLKJIHGFEDCBA".split(""),"#"],y=p=>{const S=p.trim().charAt(0).toUpperCase();if(/[A-Z]/.test(S))return S;if(/[0-9]/.test(S))return"#";{const w=p.match(/[A-Z]/i);return w?w[0].toUpperCase():"#"}},b=p=>e.some(S=>y(S.title)===p),x=p=>{const S=s.current;if(!S)return;const w=e.findIndex(N=>y(N.title)===p);if(w===-1)return;const f=e[w],m=S,v=m.__virtualizedGridRef?.current,E=m.__virtualizedListRef?.current,h=l?.current||v,j=i?.current||E;if(h&&a==="grid"){const N=h;if(N&&typeof N.scrollToCell=="function"){const T=S.clientWidth,R=(g||150)+40,D=Math.max(1,Math.floor((T+40)/R)),A=Math.floor(w/D),G=w%D;N.scrollToCell({rowIndex:A,columnIndex:G,align:"start",behavior:"smooth"});return}}if(j&&a==="detail"){const N=j;if(N&&typeof N.scrollToRow=="function"){N.scrollToRow({index:w,align:"start",behavior:"smooth"});return}}if(n?.current){const N=n.current.get(f.id);if(N){const T=S.getBoundingClientRect(),R=N.getBoundingClientRect(),D=S.querySelector("thead"),A=D?D.offsetHeight:0,G=A>0?A+4:20,I=S.scrollTop+R.top-T.top-G;S.scrollTo({top:I,behavior:"smooth"});return}}const L=Math.floor(S.clientWidth/200),C=Math.floor(w/L)*200;S.scrollTo({top:C,behavior:"smooth"})};return!c||e.length===0?null:t.jsx("div",{className:"home-page-alphabet-container",children:t.jsx("div",{className:"alphabet-navigator",children:u.map(p=>{const S=b(p);return t.jsx("button",{onClick:()=>x(p),disabled:!S,className:"alphabet-button",children:p},p)})})})}function ks({onGameClick:e,onGamesLoaded:s,onPlay:n,allCollections:o=[]}){const{isLoading:l}=Re(),{categoryId:i}=ut(),[a,g]=r.useState(()=>localStorage.getItem("viewMode_category")||"grid"),c=(()=>{const b=localStorage.getItem("coverSize");return b?parseInt(b,10):150})();r.useEffect(()=>{localStorage.setItem("viewMode_category",a)},[a]);const d=Tt({defaultFilterField:"genre",categoryId:i||null,listenToGameDeleted:!0,gameEvents:["gameUpdated","gameDeleted"],scrollRestorationMode:a==="table"?void 0:a}),u=r.useCallback((b,x,p)=>qe(b,x,p??!0),[]),y=r.useCallback(b=>{s(b)},[s]);return t.jsxs(t.Fragment,{children:[t.jsx(kt,{libraries:[],activeLibrary:null,onSelectLibrary:()=>{},loading:!1,error:null,viewMode:a,onViewModeChange:g}),t.jsx("div",{className:"bg-[#1a1a1a] home-page-main-container",children:t.jsx("main",{className:"flex-1 home-page-content",children:t.jsxs("div",{className:"home-page-layout",children:[t.jsx(ps,{hook:d,viewMode:a,coverSize:c,isLoading:l,isReady:d.isReady,allCollections:o,onGameClick:e,onGamesLoaded:y,onPlay:n,buildCoverUrlFn:u}),d.sortField==="title"&&d.isReady&&t.jsx(xs,{games:d.filteredAndSortedGames,scrollContainerRef:a==="table"?d.tableScrollRef:d.scrollContainerRef,itemRefs:d.itemRefs,ascending:d.sortAscending,virtualizedGridRef:a==="grid"&&d.scrollContainerRef.current?d.scrollContainerRef.current.__virtualizedGridRef:void 0,virtualizedListRef:a==="detail"&&d.scrollContainerRef.current?d.scrollContainerRef.current.__virtualizedListRef:void 0,viewMode:a,coverSize:c})]})})})]})}export{xs as A,Es as B,ks as C,Bt as E,Kt as G,kt as L,Fe as S,yt as a,mt as b,Lt as c,bt as d,Tt as e,Ye as f,ps as g,Ee as h,Rt as u};
