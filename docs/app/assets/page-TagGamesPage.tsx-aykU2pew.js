import{d as E,r as o,j as r}from"./react-vendor-jNdKP8wU.js";import{e as z,h as _,L as I}from"./page-CollectionDetail.tsx-DYxPNzRb.js";import{u as A,G as F}from"./page-LibraryPage.tsx-DmbzbHGd.js";import{A as N}from"./page-CollectionsPage.tsx-CqznnysS.js";function B({onGameClick:k,onGamesLoaded:c,onPlay:C,allCollections:x=[],tagField:l,paramName:G,storageKey:i}){const{isLoading:L}=z(),n=E()[G],s=o.useMemo(()=>n?decodeURIComponent(n):null,[n]),[a,P]=o.useState(()=>localStorage.getItem(`viewMode_${i}`)||"grid"),d=(()=>{const t=localStorage.getItem("coverSize");return t?parseInt(t,10):150})();o.useEffect(()=>{localStorage.setItem(`viewMode_${i}`,a)},[a,i]);const e=A({defaultFilterField:l,listenToGameDeleted:!0,gameEvents:["gameUpdated","gameDeleted"],scrollRestorationMode:a==="table"?void 0:a}),{setFilterField:m,setSelectedThemes:u,setSelectedKeywords:f,setSelectedPlatforms:g,setSelectedGameModes:v,setSelectedPublishers:b,setSelectedDevelopers:p,setSelectedPlayerPerspectives:R,setSelectedGameEngines:S,setSelectedGenre:h}=e;o.useEffect(()=>{if(s)switch(m(l),l){case"themes":u(s);break;case"keywords":f(s);break;case"platforms":g(s);break;case"gameModes":v(s);break;case"publishers":b(s);break;case"developers":p(s);break;case"playerPerspectives":R(s);break;case"gameEngines":S(s);break;case"genre":h(s);break}},[s,l,m,u,f,g,v,b,p,R,S,h]);const j=o.useCallback((t,M,y)=>_(t,M,y??!0),[]),w=o.useCallback(t=>{c(t)},[c]);return r.jsxs(r.Fragment,{children:[r.jsx(I,{libraries:[],activeLibrary:null,onSelectLibrary:()=>{},loading:!1,error:null,viewMode:a,onViewModeChange:P}),r.jsx("div",{className:"bg-[#1a1a1a] home-page-main-container",children:r.jsx("main",{className:"flex-1 home-page-content",children:r.jsxs("div",{className:"home-page-layout",children:[r.jsx(F,{hook:e,viewMode:a,coverSize:d,isLoading:L,isReady:e.isReady,allCollections:x,onGameClick:k,onGamesLoaded:w,onPlay:C,buildCoverUrlFn:j}),e.sortField==="title"&&e.isReady&&r.jsx(N,{games:e.filteredAndSortedGames,scrollContainerRef:a==="table"?e.tableScrollRef:e.scrollContainerRef,itemRefs:e.itemRefs,ascending:e.sortAscending,virtualizedGridRef:a==="grid"&&e.scrollContainerRef.current?e.scrollContainerRef.current.__virtualizedGridRef:void 0,virtualizedListRef:a==="detail"&&e.scrollContainerRef.current?e.scrollContainerRef.current.__virtualizedListRef:void 0,viewMode:a,coverSize:d})]})})})]})}export{B as T};
