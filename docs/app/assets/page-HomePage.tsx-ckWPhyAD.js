import{r as o,j as r}from"./react-vendor-jNdKP8wU.js";import{L as V}from"./page-CategoryPage.tsx-CkrIduET.js";import{u as G,f as z}from"./page-CategoriesPage.tsx-UEkNxXUO.js";import{L as E}from"./page-LibraryPage.tsx-Do62wp4p.js";import{R as F}from"./page-RecommendedPage.tsx-OUHnJVQC.js";import{C as P}from"./page-CollectionsPage.tsx-C6oIYQJm.js";/* empty css                          */function K({onGameClick:b,onGamesLoaded:v,onPlay:c,onReloadMetadata:k,allCollections:d=[]}){const{isLoading:L}=G(),[s,h]=o.useState([]),[t,m]=o.useState(null),[p,g]=o.useState(null),[i,x]=o.useState(()=>{const e=localStorage.getItem("coverSize");return e?parseInt(e,10):150}),[y,n]=o.useState("grid"),j=(e,a)=>{localStorage.setItem(`viewMode_${e}`,a)},f=e=>localStorage.getItem(`viewMode_${e}`)||"grid",C=e=>{n(e),t&&t.key==="library"&&j(t.key,e)},M=e=>{x(e),localStorage.setItem("coverSize",e.toString())};o.useEffect(()=>{w()},[]),o.useEffect(()=>{if(s.length>0&&!t){const e=localStorage.getItem("lastSelectedLibrary"),a=e&&s.find(l=>l.key===e)||s[0];if(m(a),a.key==="library"){const l=f(a.key);n(l)}else n("grid")}},[s]);async function w(){g(null);try{h([{key:"recommended",type:"games"},{key:"library",type:"games"},{key:"collections",type:"collections"},{key:"categories",type:"games"}])}catch(e){const a=String(e.message||e);g(a)}}function I(e){if(localStorage.setItem("lastSelectedLibrary",e.key),m(e),e.key==="library"){const a=f(e.key);n(a)}else n("grid")}function u(e){b(e)}function S(e){v(e)}return r.jsxs(r.Fragment,{children:[r.jsx(V,{libraries:s,activeLibrary:t,onSelectLibrary:I,loading:L,error:p,coverSize:i,onCoverSizeChange:M,viewMode:y,onViewModeChange:C,onReloadMetadata:k}),r.jsx("div",{className:"bg-[#1a1a1a] home-page-main-container",children:t?r.jsxs(r.Fragment,{children:[t.key==="library"&&r.jsx(E,{onGameClick:u,onGamesLoaded:S,onPlay:c,coverSize:i,viewMode:y,allCollections:d}),t.key==="recommended"&&r.jsx(F,{onGameClick:u,onGamesLoaded:S,onPlay:c,coverSize:i,allCollections:d}),t.key==="collections"&&r.jsx(P,{onPlay:c,coverSize:i}),t.key==="categories"&&r.jsx(z,{coverSize:i})]}):r.jsx("div",{className:"flex items-center justify-center h-full"})})]})}export{K as H};
