import{r as n,j as t}from"./react-vendor-jNdKP8wU.js";import{u as D}from"./page-CategoriesPage.tsx-UEkNxXUO.js";import{A,g as _}from"./page-AddGamePage.tsx-lJZ2PP1m.js";/* empty css                              */import{u as O}from"./i18n-vendor-mPXi0JFR.js";function X(){const{t:e,i18n:r}=O(),{setLoading:d,isLoading:k}=D(),[i,o]=n.useState("en"),[x,g]=n.useState(null),[v,j]=n.useState(!1),[a,w]=n.useState(""),[l,S]=n.useState(""),[N,f]=n.useState(null),[C,T]=n.useState(null),[I,b]=n.useState(!1),y=x!==null&&i!==x,L=N!==null&&a!==N||C!==null&&l!==C;n.useEffect(()=>{const s=localStorage.getItem("twitch_client_id")||"",u=localStorage.getItem("twitch_client_secret")||"";w(s),S(u),f(s),T(u);async function P(){d(!0);try{const m=new URL("/settings",A),c=await fetch(m.toString(),{headers:{Accept:"application/json","X-Auth-Token":_()}});if(c.ok){const p=(await c.json()).language||"en";o(p),g(p),r.changeLanguage(p)}else{const h=localStorage.getItem("language")||"en";o(h),g(h),r.changeLanguage(h)}}catch(m){console.error("Failed to load settings:",m);const c=localStorage.getItem("language")||"en";o(c),g(c),r.changeLanguage(c)}finally{d(!1)}}P()},[d]);async function E(){j(!0);try{const s=new URL("/settings",A);if(!(await fetch(s.toString(),{method:"PUT",headers:{"Content-Type":"application/json","X-Auth-Token":_()},body:JSON.stringify({language:i})})).ok)throw new Error("Failed to save settings");localStorage.setItem("language",i),r.changeLanguage(i),g(i)}catch(s){console.error("Failed to save settings:",s),localStorage.setItem("language",i),r.changeLanguage(i),g(i)}finally{j(!1)}}function F(){if(!(!a.trim()||!l.trim())){b(!0);try{localStorage.setItem("twitch_client_id",a.trim()),localStorage.setItem("twitch_client_secret",l.trim()),f(a.trim()),T(l.trim())}catch(s){console.error("Failed to save Twitch credentials:",s)}finally{b(!1)}}}return t.jsx("div",{className:"bg-[#1a1a1a] text-white settings-page",children:t.jsxs("div",{className:"settings-container",children:[t.jsxs("div",{className:"settings-header",children:[t.jsx("h1",{className:"settings-title",children:e("settings.title")}),t.jsx("p",{className:"settings-subtitle",children:e("settings.subtitle")})]}),t.jsxs("div",{className:"bg-[#1a1a1a] settings-card",children:[t.jsx("div",{className:"settings-card-header",children:t.jsx("h2",{className:"settings-card-title",children:e("settings.general")})}),t.jsxs("div",{className:"settings-card-content",children:[t.jsx("div",{className:"settings-field-small",children:t.jsxs("div",{className:"settings-label",children:[e("settings.version")," ","0.1.4"]})}),t.jsxs("div",{className:"settings-field",children:[t.jsxs("div",{className:"settings-field-row",children:[t.jsx("label",{className:"settings-label",htmlFor:"language-select",children:e("settings.language")}),t.jsxs("select",{id:"language-select",name:"language",value:i,onChange:s=>o(s.target.value),className:"settings-select",children:[t.jsx("option",{value:"en",children:e("settings.english")}),t.jsx("option",{value:"it",children:e("settings.italian")}),t.jsx("option",{value:"pt",children:e("settings.portuguese")}),t.jsx("option",{value:"es",children:e("settings.spanish")}),t.jsx("option",{value:"fr",children:e("settings.french")}),t.jsx("option",{value:"de",children:e("settings.german")}),t.jsx("option",{value:"zh",children:e("settings.chinese")}),t.jsx("option",{value:"ja",children:e("settings.japanese")})]})]}),t.jsx("p",{className:"settings-help-text",children:e("settings.selectLanguage")})]}),t.jsx("div",{className:"settings-actions",children:t.jsx("button",{onClick:E,className:`settings-button ${y?"settings-button-active":""}`,disabled:k||v||!y,children:e(v?"settings.saving":"settings.save")})})]})]}),t.jsxs("div",{className:"bg-[#1a1a1a] settings-card",style:{marginTop:"24px"},children:[t.jsx("div",{className:"settings-card-header",children:t.jsx("h2",{className:"settings-card-title",children:e("settings.twitch.title","Twitch OAuth")})}),t.jsxs("div",{className:"settings-card-content",children:[t.jsx("p",{className:"settings-help-text",style:{marginBottom:"24px"},children:e("settings.twitch.description","Configure your Twitch OAuth application credentials. You can get these from the Twitch Developer Console.")}),t.jsxs("div",{className:"settings-field",children:[t.jsx("label",{className:"settings-label",htmlFor:"twitch-client-id",children:e("settings.twitch.clientId","Client ID")}),t.jsx("input",{id:"twitch-client-id",type:"text",value:a,onChange:s=>w(s.target.value),className:"settings-input",placeholder:e("settings.twitch.clientIdPlaceholder","Enter your Twitch Client ID"),style:{marginTop:"8px"}}),t.jsx("p",{className:"settings-help-text",children:e("settings.twitch.clientIdHelp","Your Twitch application Client ID")})]}),t.jsxs("div",{className:"settings-field",children:[t.jsx("label",{className:"settings-label",htmlFor:"twitch-client-secret",children:e("settings.twitch.clientSecret","Client Secret")}),t.jsx("input",{id:"twitch-client-secret",type:"password",value:l,onChange:s=>S(s.target.value),className:"settings-input",placeholder:e("settings.twitch.clientSecretPlaceholder","Enter your Twitch Client Secret"),style:{marginTop:"8px"}}),t.jsx("p",{className:"settings-help-text",children:e("settings.twitch.clientSecretHelp","Your Twitch application Client Secret (keep this secure)")})]}),t.jsx("div",{className:"settings-actions",children:t.jsx("button",{onClick:F,className:`settings-button ${L?"settings-button-active":""}`,disabled:!a.trim()||!l.trim()||I||!L,children:e(I?"settings.saving":"settings.save")})})]})]})]})})}export{X as S};
