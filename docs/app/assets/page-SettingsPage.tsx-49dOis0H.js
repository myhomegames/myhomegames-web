import{r,j as e}from"./react-vendor-COHXxlBx.js";import{u as S}from"./page-CategoriesPage.tsx-5ovgj7yS.js";import{A as x,g as p}from"./page-AddGamePage.tsx-kNlLaymQ.js";/* empty css                              */import{u as L}from"./i18n-vendor-ClaDN9Oc.js";function I(){const{t:s,i18n:i}=L(),{setLoading:d,isLoading:f}=S(),[t,g]=r.useState("en"),[h,l]=r.useState(null),[m,j]=r.useState(!1),v=h!==null&&t!==h;r.useEffect(()=>{async function a(){d(!0);try{const c=new URL("/settings",x),n=await fetch(c.toString(),{headers:{Accept:"application/json","X-Auth-Token":p()}});if(n.ok){const u=(await n.json()).language||"en";g(u),l(u),i.changeLanguage(u)}else{const o=localStorage.getItem("language")||"en";g(o),l(o),i.changeLanguage(o)}}catch(c){console.error("Failed to load settings:",c);const n=localStorage.getItem("language")||"en";g(n),l(n),i.changeLanguage(n)}finally{d(!1)}}a()},[d]);async function N(){j(!0);try{const a=new URL("/settings",x);if(!(await fetch(a.toString(),{method:"PUT",headers:{"Content-Type":"application/json","X-Auth-Token":p()},body:JSON.stringify({language:t})})).ok)throw new Error("Failed to save settings");localStorage.setItem("language",t),i.changeLanguage(t),l(t)}catch(a){console.error("Failed to save settings:",a),localStorage.setItem("language",t),i.changeLanguage(t),l(t)}finally{j(!1)}}return e.jsx("div",{className:"bg-[#1a1a1a] text-white settings-page",children:e.jsxs("div",{className:"settings-container",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("h1",{className:"settings-title",children:s("settings.title")}),e.jsx("p",{className:"settings-subtitle",children:s("settings.subtitle")})]}),e.jsxs("div",{className:"bg-[#1a1a1a] settings-card",children:[e.jsx("div",{className:"settings-card-header",children:e.jsx("h2",{className:"settings-card-title",children:s("settings.general")})}),e.jsxs("div",{className:"settings-card-content",children:[e.jsx("div",{className:"settings-field-small",children:e.jsxs("div",{className:"settings-label",children:[s("settings.version")," ","0.1.3"]})}),e.jsxs("div",{className:"settings-field",children:[e.jsxs("div",{className:"settings-field-row",children:[e.jsx("label",{className:"settings-label",htmlFor:"language-select",children:s("settings.language")}),e.jsxs("select",{id:"language-select",name:"language",value:t,onChange:a=>g(a.target.value),className:"settings-select",children:[e.jsx("option",{value:"en",children:s("settings.english")}),e.jsx("option",{value:"it",children:s("settings.italian")}),e.jsx("option",{value:"pt",children:s("settings.portuguese")}),e.jsx("option",{value:"es",children:s("settings.spanish")}),e.jsx("option",{value:"fr",children:s("settings.french")}),e.jsx("option",{value:"de",children:s("settings.german")}),e.jsx("option",{value:"zh",children:s("settings.chinese")}),e.jsx("option",{value:"ja",children:s("settings.japanese")})]})]}),e.jsx("p",{className:"settings-help-text",children:s("settings.selectLanguage")})]}),e.jsx("div",{className:"settings-actions",children:e.jsx("button",{onClick:N,className:`settings-button ${v?"settings-button-active":""}`,disabled:f||m||!v,children:s(m?"settings.saving":"settings.save")})})]})]})]})})}export{I as S};
