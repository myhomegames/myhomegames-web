import{d as N,r as l,j as r}from"./react-vendor-jNdKP8wU.js";import{u as D,d as T,A as U}from"./page-CollectionsPage.tsx-DjVo-48O.js";import{u as V,G as $}from"./page-LibraryPage.tsx-Cz-By_fa.js";import{L as B}from"./page-HomePage.tsx-DvziKYYh.js";function W({onGameClick:j,onGamesLoaded:m,onPlay:w,allCollections:y=[],tagField:o,paramName:M,storageKey:i}){const{isLoading:_,setLoading:u}=D(),n=N()[M],s=l.useMemo(()=>n?decodeURIComponent(n):null,[n]),[a,z]=l.useState(()=>localStorage.getItem(`viewMode_${i}`)||"grid"),f=(()=>{const t=localStorage.getItem("coverSize");return t?parseInt(t,10):150})();l.useEffect(()=>{localStorage.setItem(`viewMode_${i}`,a)},[a,i]);const e=V({defaultFilterField:o,scrollRestorationMode:a==="table"?void 0:a}),{libraryGamesLoading:b,setFilterField:g,setSelectedThemes:v,setSelectedKeywords:S,setSelectedPlatforms:p,setSelectedGameModes:R,setSelectedPublishers:h,setSelectedDevelopers:k,setSelectedPlayerPerspectives:L,setSelectedGameEngines:C,setSelectedGenre:x,setSelectedSeries:G,setSelectedFranchise:P,setSortField:c,setSortAscending:d}=e;l.useEffect(()=>{u(b)},[b,u]),l.useEffect(()=>{if(s)switch(g(o),o){case"themes":v(s);break;case"keywords":S(s);break;case"platforms":p(s);break;case"gameModes":R(s);break;case"publishers":h(s);break;case"developers":k(s);break;case"playerPerspectives":L(s);break;case"gameEngines":C(s);break;case"genre":x(s);break;case"series":G(s),c("releaseDate"),d(!0);break;case"franchise":P(s),c("releaseDate"),d(!0);break}},[s,o,g,v,S,p,R,h,k,L,C,x,G,P,c,d]);const E=l.useCallback((t,A,I)=>T(t,A,I??!0),[]),F=l.useCallback(t=>{m(t)},[m]);return r.jsxs(r.Fragment,{children:[r.jsx(B,{libraries:[],activeLibrary:null,onSelectLibrary:()=>{},loading:!1,error:null,viewMode:a,onViewModeChange:z}),r.jsx("div",{className:"bg-[#1a1a1a] home-page-main-container",children:r.jsx("main",{className:"flex-1 home-page-content",children:r.jsxs("div",{className:"home-page-layout",children:[r.jsx($,{hook:e,viewMode:a,coverSize:f,isLoading:_,isReady:e.isReady,allCollections:y,onGameClick:j,onGamesLoaded:F,onPlay:w,buildCoverUrlFn:E}),e.sortField==="title"&&e.isReady&&r.jsx(U,{games:e.filteredAndSortedGames,scrollContainerRef:a==="table"?e.tableScrollRef:e.scrollContainerRef,itemRefs:e.itemRefs,ascending:e.sortAscending,virtualizedGridRef:a==="grid"&&e.scrollContainerRef.current?e.scrollContainerRef.current.__virtualizedGridRef:void 0,virtualizedListRef:(a==="detail"&&e.scrollContainerRef.current?e.scrollContainerRef.current.__virtualizedListRef:void 0)||(a==="table"&&e.tableScrollRef.current?e.tableScrollRef.current.__virtualizedListRef:void 0),viewMode:a,coverSize:f})]})})})]})}export{W as T};
